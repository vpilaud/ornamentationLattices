\documentclass{amsart}

\usepackage{enumerate, amsmath, amsfonts, amssymb, amsthm, thmtools, wasysym, graphics, graphicx, xcolor, url, hyperref, hypcap, a4wide, pdflscape, multido, xargs, colortbl, multicol, multirow, calc, shuffle, hvfloat}
\hypersetup{colorlinks=true, citecolor=darkblue, linkcolor=darkblue}
%\usepackage[all]{xy}
\usepackage{tikz}
\usetikzlibrary{trees, decorations, decorations.markings, shapes, arrows, matrix, calc, fit, intersections, patterns, angles, cd}
\usepackage{tikz-qtree}
\usepackage{comment}
\usepackage{etex}
\usepackage{ulem}\normalem % to strike through a word
\usepackage[noabbrev,capitalise]{cleveref}
\setlength{\abovecaptionskip}{10pt}
\setlength{\belowcaptionskip}{5pt}
\usepackage[export]{adjustbox}

%\reserveinserts{50}
\graphicspath{{figures/}}
\makeatletter
\def\input@path{{figures/}}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\title[Ornamentation lattices and intreeval hypergraphic lattices]{Ornamentation lattices and \\ intreeval hypergraphic lattices}

\author{Antoine Abram}
\address[A.~Abram]{}
\email{}
\urladdr{}

\author{Jose Bastidas}
\address[J.~Bastidas]{}
\email{}
\urladdr{}

\author{Félix Gélinas}
\address[F.~Gélinas]{}
\email{}
\urladdr{}

\author{Vincent Pilaud}
\address[V.~Pilaud]{Universitat de Barcelona \& Centre de Recerca Matemàtica, Barcelona}
\email{vincent.pilaud@ub.edu}
\urladdr{https://www.ub.edu/comb/vincentpilaud/}

\author{Andrew Sack}
\address[A.~Sack]{}
\email{}
\urladdr{}

\thanks{
VP was partially supported by the Spanish project PID2022-137283NB-C21 of MCIN/AEI/10.13039/501100011033 / FEDER, UE, by the Spanish--German project COMPOTE (AEI PCI2024-155081-2 \& DFG 541393733), by the Severo Ochoa and María de Maeztu Program for Centers and Units of Excellence in R\&D (CEX2020-001084-M), by the Departament de Recerca i Universitats de la Generalitat de Catalunya (2021 SGR 00697), and by the French--Austrian project PAGCAP (ANR-21-CE48-0020 \& FWF I 5788).
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% theorems
\newtheorem{theorem}{Theorem}[section]
\newtheorem{theoremA}{Theorem}
\renewcommand{\thetheoremA}{\Alph{theoremA}}
\crefname{theoremA}{Theorem}{Theorems}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{conjecture}[theorem]{Conjecture}
\crefname{conjecture}{Conjecture}{Conjectures}
\newtheorem{conjectureA}{Conjecture}
\renewcommand{\theconjectureA}{\Alph{conjectureA}}
\crefname{conjectureA}{Conjecture}{Conjectures}
\crefname{conjectureA}{Conjecture}{Conjectures}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{question}[theorem]{Question}
\newtheorem{notation}[theorem]{Notation}
\newtheorem{openproblem}[theorem]{Open problem}
\crefname{notation}{Notation}{Notations}


% newcommands
% math special letters
\newcommand{\R}{\mathbb{R}} % reals
\newcommand{\N}{\mathbb{N}} % naturals
\newcommand{\Z}{\mathbb{Z}} % integers
\newcommand{\I}{\mathbb{I}} % set of integers
\newcommand{\C}{\mathbb{C}} % set of summands
\renewcommand{\b}[1]{\boldsymbol{#1}} % bold
\renewcommand{\c}[1]{\mathcal{#1}} % bold
\newcommand{\cal}[1]{\mathcal{#1}} % cal

% math commands
\newcommand{\set}[2]{\left\{ #1 \;\middle|\; #2 \right\}} % set notation
\newcommand{\bigset}[2]{\big\{ #1 \;|\; #2 \big\}} % big set notation
\newcommand{\biggset}[2]{\bigg\{ #1 \;\bigg|\; #2 \bigg\}} % big set notation
\newcommand{\multiset}[2]{\left\{\!\!\left\{ #1 \;\middle|\; #2 \right\}\!\!\right\}} % multiset notation
\newcommand{\bigmultiset}[2]{\big\{\!\!\big\{ #1 \;|\; #2 \big\}\!\!\big\}} % big multiset notation
\newcommand{\ssm}{\smallsetminus} % small set minus
\newcommand{\dotprod}[2]{\langle #1 | #2 \rangle} % dot product
\newcommand{\symdif}{\triangle} % symmetric difference
\newcommand{\one}{{1\!\!1}} % the all one vector
\newcommand{\eqdef}{\mbox{\,\raisebox{0.2ex}{\scriptsize\ensuremath{\mathrm:}}\ensuremath{=}\,}} % :=
\newcommand{\defeq}{\mbox{~\ensuremath{=}\raisebox{0.2ex}{\scriptsize\ensuremath{\mathrm:}} }} % =:
\newcommand{\polar}{^\diamond} % polar
\newcommand{\simplex}{\triangle} % simplex
%\renewcommand{\implies}{\;\Rightarrow\;} % implies
\newcommand{\surjection}{\longrightarrow\mathrel{\mkern-22mu}\rightarrow\,}     
\newcommand{\bijection}{\longleftrightarrow}     

% operators
\DeclareMathOperator{\conv}{conv} % convex hull
\DeclareMathOperator{\cone}{cone} % cone hull
\DeclareMathOperator{\inv}{inv} % inversion set
\DeclareMathOperator{\tc}{tc} % transitive closure

% others
\newcommand{\fix}[1]{{\bf FIXME: }#1} % emphasis of a problem to FIX
\newcommand{\ie}{\textit{i.e.}~} % id est
\newcommand{\eg}{\textit{e.g.}~} % exempli gratia
\newcommand{\Eg}{\textit{E.g.}~} % exempli gratia
\newcommand{\aka}{\textit{aka.}~} % also known as
\newcommand{\viceversa}{\textit{vice versa}} % vice versa
\newcommand{\ordinal}{\textsuperscript{th}} % th for ordinals
\newcommand{\ex}[1]{^{\textrm{ex#1}}} % example
\newcommand{\para}[1]{\medskip\noindent\textbf{#1}} % paragraph
\newcommand{\subpara}[1]{\smallskip\noindent\textit{#1.}} % paragraph
\definecolor{darkblue}{rgb}{0,0,0.7} % darkblue color
\newcommand{\blue}[1]{{\color{blue} #1}} % blue
\newcommand{\red}[1]{{\color{red} #1}} % red
\newcommand{\darkblue}{\color{darkblue}} % darkblue command
\newcommand{\defn}[1]{\textsl{\darkblue #1}} % emphasis of a definition
\usepackage{todonotes}
\newcommand{\vincent}[1]{\todo[size=\tiny,color=blue!30]{ #1 \\ \hfill --- V.}\,}
\newcommand{\Vincent}[1]{\todo[inline,color=blue!30]{#1 \\ \hfill --- V.}}
\newcommand{\jose}[1]{\todo[size=\tiny,color=red!30]{ #1 \\ \hfill --- J.}\,}

% permutations
\newcommand{\fS}{\mathfrak{S}} % symmetric group
\newcommand{\fR}{\mathfrak{R}} % subset symmetric group

% lattices
\newcommand{\meet}{\wedge} % meet
\newcommand{\join}{\vee} % join
\newcommand{\bigMeet}{\bigwedge} % meet
\newcommand{\bigJoin}{\bigvee} % join
\newcommand{\less}{\vartriangleleft} % smaller WOIP
\newcommand{\lesseq}{\trianglelefteq} % smaller WOIP
\newcommand{\more}{\vartriangleright} % larger WOIP
\newcommand{\contactLess}[1]{\less_{#1}} % smaller contact graph
\newcommand{\contactMore}[1]{\more_{#1}} % larger contact graph
\newcommand{\projDown}{\pi^\downarrow} % Down projection
\newcommand{\projUp}{\pi^\uparrow} % Down projection

% Ornamentations, reorientations, orientations
\newcommand{\mymap}[2]{\mathsf{#1}_{\hspace{-.7pt}#2}}
\DeclareMathOperator{\Orn}{\c{O}}  % ornamentations
\newcommand{\orn}[1]{\mymap{O}{#1}}  % ornamentation
\DeclareMathOperator{\AOrn}{\c{AO}}  % acyclic ornamentations
\newcommand{\aorn}[1]{\mymap{AO}{#1}}  % acyclic ornamentation
\DeclareMathOperator{\Reori}{\c{R}}  % reorientations
\newcommand{\reori}[1]{\mymap{R}{#1}}  % reorientation
\newcommand{\maxreori}[1]{\smash{\mymap{R}{#1}^{\uparrow}}}  % maximal reorientation
\DeclareMathOperator{\AReori}{\c{AR}}  % acyclic reorientations
\newcommand{\areori}[1]{\mymap{AR}{#1}}  % acyclic reorientation
\DeclareMathOperator{\Rcl}{\c{R}^{cl}}  % transitively closed reorientations
\DeclareMathOperator{\Rco}{\c{R}^{co}}  % transitively coclosed reorientations
\DeclareMathOperator{\rev}{rev} % reversed arrows
\DeclareMathOperator{\Sour}{\mathcal{S}}  % sourcings
\newcommand{\sour}[1]{\mymap{S}{#1}}  % sourcing
\DeclareMathOperator{\ASour}{\mathcal{AS}}  % acyclic sourcings
\newcommand{\asour}[1]{\mymap{AS}{#1}}  % acyclic sourcing
\DeclareMathOperator{\arr}{arr} % arrows

% Hypergraph and Intervals
\newcommand{\HH}{\mathbb H}  % general hypergraph
\newcommand{\II}{\mathbb I} % interval hypergraph
\newcommand{\PP}{\mathbb P} % path hypergraph

% Special graphs
\newcommand{\Igraph}{\sf I} % I graph
\newcommand{\Ngraph}{\sf N} % N graph
\newcommand{\Xgraph}{\sf X} % X graph
\newcommand{\Tgraph}{\sf I\!X\!I} % tie graph
\newcommand{\Ygraph}{\sf Y} % Y graph
\newcommand{\Dgraph}{\boldsymbol{\Diamond}} % D graph
\newcommand{\Kgraph}{\boldsymbol{\triangle}} % K graph
\newcommand{\Agraph}{\rotatebox[origin=c]{180}{\sf Y}} % A graph

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\begin{abstract}
\end{abstract}

\maketitle

\tableofcontents

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pagebreak

\section{Introduction}
\label{sec:introduction}


Answering a question opened in~\cite{DelfantSack}, we will prove the following statement in \cref{subsec:rootedTrees}.

\begin{theorem}
The Hasse diagram of the ornamentation lattice of a rooted tree is isomorphic to the skeleton of a polytope oriented in a linear direction. 
\end{theorem}

This question remains open beyond the case of rooted trees.
We state it as a conjecture.

\begin{conjecture}
The Hasse diagram of the ornamentation lattice of any directed graph is isomorphic to the skeleton of a polytope oriented in a linear direction. 
\vincent{Should we assume acyclic?}
\end{conjecture}

%\vincent{This is the introduction of the other paper. Needs to be updated...}
%Fix an integer~$n \ge 1$ and denote by~$(\b{e}_i)_{i \in [n]}$ the standard basis of~$\R^n$.
%The \defn{hypergraphic polytope} of a hypergraph~$\HH$ on~$[n]$ is the Minkowski sum
%\(
%\simplex_\HH \eqdef \sum_{H\in \HH} \simplex_H\,,
%\)
%where $\simplex_H$ is the simplex given by the convex hull of the points $\b{e}_h$ for~$h \in H$.
%The face lattice of~$\simplex_\HH$ was described combinatorially in terms of acyclic orientations of~$\HH$ in~\cite{BenedettiBergeronMachacek}.
%Note that the singletons of~$\HH$ are irrelevant for the combinatorics of~$\triangle_\HH$ as they just contribute to translations.
%It is convenient for us to assume that~$\{i\} \in \HH$ for all~$i \in [n]$.
%
%The \defn{hypergraphic poset}~$P_\HH$ is the transitive closure of the skeleton of~$\simplex_\HH$ oriented in the direction~$\b{\omega} \eqdef (n, n-1, \dots, 2, 1) - (1, 2, \dots, n-1, n) = (n-1, n-3, \dots, 3-n, 1-n)$.
%For instance, 
%\begin{itemize}
%\item if~$\HH = \binom{[n]}{2}$ is the complete graph (or any hypergraph containing it), then~$\simplex_\HH$ is the \defn{permutahedron} and $P_\HH$ is the \defn{weak order on permutations},
%\item if~$\HH = \set{[i,j]}{1 \le i \le j \le n}$ is the complete interval hypergraph, then~$\simplex_\HH$ is \mbox{J.-L.~Loday's} \defn{associahedron}~\cite{ShniderSternberg,Loday} and~$P_\HH$ is the \defn{Tamari lattice on binary trees}~\cite{Tamari}.
%\end{itemize}
%
%In view of these two examples, we would like to characterize the hypergraphs~$\HH$ for which $P_\HH$ is a lattice, a distributive lattice, a semidistributive lattice, a congruence-uniform lattice, a \mbox{(semi-)lattice} quotient of the weak order on permutations, etc.
%These questions were settled in~\cite{Pilaud-acyclicReorientationLattices} for graphical zonotopes (\ie when~$\HH \subseteq \binom{[n]}{2}$), and also partially studied in~\cite{BarnardMcConville} for graph associahedra~\cite{CarrDevadoss} (\ie when~$\HH$ is the set of all subsets of vertices that induce a connected subgraph of a fixed graph on~$[n]$).
%
%In this paper, we study the case of \defn{interval hypergraphs}~$\II$, \ie when all hyperedges of~$\II$ are intervals of~$[n]$.
%Note that the family of interval hypergraphic polytopes does not contain the permutahedron, but contains
%\begin{itemize}
%\item the classical associahedron of~\cite{ShniderSternberg,Loday} when~$\II$ contains all intervals of~$[n]$,
%\item the Pitman--Stanley polytope~\cite{PitmanStanley} when~$\II$ is the set of all singletons~$\{i\}$ and all initial intervals~$[i]$~for~${i \in [n]}$,
%\item the freehedron of~\cite{Saneblidze-freehedron} when~$\II$ is the set of all singletons~$\{i\}$, all initial intervals~$[i]$ for~${i \in [n]}$, and all final intervals~$[n] \ssm [i]$~for~${i \in [n-1]}$,
%\item the fertilitopes of~\cite{Defant-fertilitopes} when any two intervals of~$\II$ are either nested or disjoint.
%\end{itemize}
%In fact, it follows from~\cite{BazierMatteChapelierLaguetDouvilleMousavandThomasYildirim,PadrolPaluPilaudPlamondon} that the interval hypergraphic polytopes are precisely the weak Minkowski summands of the classical associahedron (recall that a polytope~$P \subset \R^n$ is a \defn{weak Minkowski summand} of a polytope~$Q \subset \R^n$ if there exists a real~$\lambda \ge 0$ and a polytope~$R \subset \R^d$ such that~$\lambda Q = P + R$).
%
%We obtain the following characterizations, where we assume that~$\{i\} \in \II$ for all~$i \in [n]$ as mentioned earlier.
%See \cref{sec:LatticeI,sec:distributive,sec:semidistributive,sec:quotient} and \cref{fig:notLattices,fig:Tamari,fig:distributiveLattices,fig:semidistributiveLattices,fig:notSemidistributiveLattices} for illustrations.
%
%\begin{theoremA}
%\label{thm:latticeI}
%For an interval hypergraph $\II$, the poset $P_\II$ is a lattice if and only if $\II$ is closed under intersection (\ie $I, J \in \II$ and~$I \cap J \ne \varnothing$ implies~$I \cap J \in \II$).
%\end{theoremA}
%
%%\begin{theoremA}
%%\label{thm:distributiveLatticeI}
%%For an interval hypergraph $\II$, the poset $P_\II$ is a distributive lattice if and only if for all~$I, J \in \II$ such that~$I \not\subseteq J$, $I \not\supseteq J$ and~$I \cap J \ne \varnothing$, the intersection~$I \cap J$ is in~$\II$ and is initial or final in any~$K \in \II$ with~$I \cap J \subseteq K$.
%%\end{theoremA}
%%
%%\begin{theoremA}
%%\label{thm:semidistributiveLatticeI}
%%For an interval hypergraph $\II$, the poset $P_\II$ is a join semidistributive lattice if and only if~$\II$ is closed under intersection and for all~$[r,r'], [s,s'], [t,t'], [u,u'] \in \II$ such that ${r < s \le r' < s'}$, $r < t \le s' < t'$, $u < \min(s, t)$ and~$s' < u'$, there is~$[v,v'] \in \II$ such that~$v < s$ and~${s' < v' < t'}$.
%%A symmetric characterization holds for meet semidistributivity.
%%\end{theoremA}
%%
%%\begin{theoremA}
%%\label{thm:quotientLatticeI}
%%For an interval hypergraph $\II$, the poset morphism from the weak order to the poset~$P_\II$ is a meet (resp.~join) semilattice morphism if and only if~$\II$ is closed under initial (resp.~final) subintervals (\ie~$[i,k] \in \II$ implies~$[i,j] \in \II$ (resp.~$[j,k] \in \II$) for any~$1 \le i < j < k \le n$).
%%\end{theoremA}
%%
%%For instance, among the four above-mentioned families of interval hypergraphic polytopes, we recover that  the Pitman-Stanley polytope and all fertilitopes yield distributive lattices, the associahedron yields a semidistributive (but not distributive) lattice which is a quotient of the weak order, while the freehedron is not even a lattice (this was actually the motivation for~\cite{PilaudPoliakova} to construct alternative realizations of the skeleton of the freehedron).
%%
%%Once \cref{thm:latticeI} is established, an important step for \cref{thm:distributiveLatticeI,thm:semidistributiveLatticeI} is to understand join irreducible elements of~$P_\II$.
%%\cref{subsec:joinIrreducibles} provides a combinatorial description of the join irreducible elements of the lattice~$P_\II$ for an arbitrary interval hypergraph~$\II$ closed under intersections.
%%To prepare this slightly technical description, we already describe some join irreducible elements of~$P_\II$ in \cref{subsec:someJoinIrreducibles}, which happen to be all join irreducible elements of~$P_\II$ under the condition of~\cref{thm:distributiveLatticeI}.
%%
%%The paper is organized as follows.
%%In \cref{sec:HP}, we recall basic properties of hypergraphic polytopes, we define hypergraphic posets, and we recall the natural poset morphism from the weak order on permutations to the hypergraphic poset~$P_\II$.
%%In \cref{sec:IHP}, we develop specific properties of interval hypergraphic polytopes, in particular a simple characterization of their vertices and a global description of the relations in their hypergraphic posets.
%%In \cref{sec:LatticeI}, we characterize the interval hypergraphs~$\II$ for which the interval hypergraphic poset~$P_\II$ is a lattice, proving \cref{thm:latticeI}.
%%In \cref{sec:distributive}, we describe a family of join irreducible elements of~$P_\II$ and we characterize the interval hypergraphs~$\II$ for which~$P_\II$ is a distributive lattice, proving \cref{thm:distributiveLatticeI}.
%%In \cref{sec:semidistributive}, we describe all join irreducible elements of~$P_\II$ and we characterize the interval hypergraphs~$\II$ for which~$P_\II$ is a join (or meet) semidistributive lattice, proving \cref{thm:semidistributiveLatticeI}.
%%In \cref{sec:quotient}, we characterize the interval hypergraphs~$\II$ for which the poset morphism from the weak order on permutations to~$P_\II$ is a join (or meet) semilattice morphism, proving \cref{thm:quotientLatticeI}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage
\section{Reorientations, sourcing, ornamentations}

Throughout this section, we fix a directed graph~$D$ on a vertex set~$V$ and denote by~$\tc(D)$ its transitive closure and by~$\PP(D)$ its hypergraph of directed paths.
It is a priori not required that~$D$ is directed acyclic, although it is the case that interest us most in this paper.
In particular, in all our pictures, $V = [n]$ and the edges are increasing (so we do not need to explicitly indicate the orientation).
%We will mostly work with a directed acyclic graph, and we represent it with edges going up in all pictures.
We define the reorientation lattice~$\Reori(\tc(D))$ (\cref{subsec:reorientations}), the sourcing lattice~$\Sour(\PP(D))$ (\cref{subsec:sourcings}), and the ornamentation lattice~$\Orn(D)$ (\cref{subsec:ornamentations}), and define natural surjective maps:
\[
\begin{array}{rcl}
	\Reori(\tc(D)) & \surjection & \Orn(D) \\
	R & \longmapsto & \orn{R}
\end{array}
\qquad\text{and}\qquad
\begin{array}{rcl}
	\Sour(\PP(D)) & \surjection & \Orn(D) \\
	S & \longmapsto & \orn{S}
\end{array}
.
\]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Ornamentations}
\label{subsec:ornamentations}

\begin{figure}
	\centerline{\includegraphics[scale=.7]{ornamentationsN} \qquad \raisebox{.5cm}{\includegraphics[scale=.7]{ornamentationsI}}}
	\caption{The ornamentation lattices~$\Orn(\Ngraph)$ and~$\Orn(\Igraph)$.}
	\label{fig:ornamentationsNI}
\end{figure}

\begin{figure}
	\centerline{\includegraphics[scale=.7]{ornamentationsY} \qquad \includegraphics[scale=.7]{ornamentationsA}}
	\caption{The ornamentation lattices~$\Orn(\Ygraph)$ and~$\Orn(\Agraph)$.}
	\label{fig:ornamentationsAY}
\end{figure}

The following definition, first introduced for rooted trees in~\cite{} and extended to arbitrary directed graphs in~\cite{}, is illustrated in \cref{fig:ornamentationsNI,fig:ornamentationsAY,fig:ornamentationsX,fig:ornamentationsD}

\begin{definition}
\label{def:Orn}
An \defn{ornament} at a vertex $v$ of~$D$ is a subset~$U \subseteq V$ such that there is a directed path from any $u \in U$ to~$v$ in the subgraph of~$D$ induced by~$U$.
An \defn{ornamentation} of~$D$ is a map $O$ on $V$ which assigns an ornament~$O(v)$ at each vertex~$v \in V$ such that~$u \in O(v) \implies O(u) \subseteq O(v)$ for all~$u,v \in V$.
We denote by~$\Orn(v \in D)$ the set of ornaments at a vertex~$v$ of~$D$ and by~$\Orn(D)$ the set of ornamentations of~$D$.
\end{definition}

\begin{example}
We can define ornamentations by
\begin{itemize}
\item sending each vertex~$v \in V$ to the singleton~$\{v\}$, 
\item sending each vertex~$v \in V$ to the set~$U$ of vertices with a path to~$v$ in~$D$,
\item for any ornament~$U \in \Orn(v \in D)$, sending~$v$ to~$U$ and any other vertex~$u \in V \ssm \{v\}$ to the singleton~$\{u\}$.
\end{itemize}
\end{example}

\begin{lemma}
\label{lem:unionOrnaments}
\begin{enumerate}[(i)]
\item If~$U \in \Orn(u \in D)$ and~$U' \in \Orn(u' \in D)$ with~$u \in U'$, then~${U \cup U' \in \Orn(u' \in D)}$.
%\item If~$U$ is an ornament at a vertex~$u$ of~$D$ and~$U'$ is an ornament at a vertex~$u'$ of~$D$ and~$u \in U'$, then~$U \cup U'$ is an ornament of~$D$ at~$u'$.
\item If~$U,U' \in \Orn(v \in D)$, then~$U \cup U' \in \Orn(v \in D)$, while $U \cap U'$ is not necessarily~in~${\Orn(v \in D)}$.
%\item If~$U,U'$ are two ornaments at a vertex~$v$ of~$D$, then~$U \cup U'$ is also an ornament at~$v$, while $U \cap U'$ is not necessarily an ornament at~$v$.
\end{enumerate}
\end{lemma}

\begin{proof}
For Part~(i), let~$w \in U \cup U'$. If~$w \in U'$, then there is a path from~$w$ to~$u'$ in~$U'$, hence in~$U \cup U'$.
If~$w \in U$, then there is a path from~$w$ to~$u$ in~$U$ and a path from~$u$ to~$u'$ in~$U'$, hence a path from~$w$ to~$u'$ in~$U \cup U'$.
Part~(ii) is a specialization of Part~(i) to~$u = v$ and~$u' = v$.
\end{proof}

\begin{theorem}
\label{thm:OrnMeetJoin}
The set~$\Orn(D)$ of ornamentations of~$D$ is a lattice under componentwise inclusion, meaning~$O_1 \le O_2$ if~$O_1(v) \subseteq O_2(v)$ for all~$v \in V$.
For any two ornamentations~$O_1$ and~$O_2$ of~$D$,
\begin{itemize}
\item $(O_1 \meet O_2)(v)$ is the inclusion maximal ornament at~$v$ contained in~$O_1(v) \cap O_2(v)$,
%\item the join~$O_1 \join O_2$ is the ornamentation of~$D$ where~$(O_1 \join O_2)(v) = \set{u \in V}{u \, R \, v}$ where $R$ is the transitive closure of~$u \in O_1(v) \cup O_2(v)$.
\item $(O_1 \join O_2)(v)$ is the inclusion minimal subset~$U$ of~$V$ containing~$v$ and such that~$u \in U$ implies~$O_1(u) \cup O_2(u) \subseteq U$.
\end{itemize}
\end{theorem}

\begin{proof}
%Given two ornamentations~$O_1$ and~$O_2$ of~$D$, let~$O_\meet$ and $O_\join$ be the maps on~$V$ defined by 
%\begin{itemize}
%\item $O_\meet(v)$ is the inclusion maximal ornament at~$v$ contained in~$O_1(v) \cap O_2(v)$,
%%\item $O_\join(v) = \set{u \in V}{u \, R \, v}$ where $R$ is the transitive closure of~$u \in O_1(v) \cup O_2(v)$.
%\item $O_\join(v)$ is the inclusion minimal subset~$U$ of~$V$ containing~$v$ and such that~$u \in U$ implies~$O_1(u) \cup O_2(u) \subseteq U$.
%\end{itemize}
%
Given two ornamentations~$O_1$ and~$O_2$ of~$D$, consider the map~$O_\meet$ on~$V$ where $O_\meet(v)$ is the inclusion maximal ornament at~$v$ contained in~$O_1(v) \cap O_2(v)$.
Note that $O_\meet(v)$ is well defined by \cref{lem:unionOrnaments}, and that~$O_\meet(v) \in \Orn(v \in D)$ for any~$v \in V$ by definition.
Consider now~$u,v \in V$ such that~$u \in O_\meet(v)$.
Since~$O_\meet(u) \in \Orn(u \in D)$ and~$O_\meet(v) \in \Orn(v \in D)$ with~${u \in O_\meet(v)}$, \cref{lem:unionOrnaments} gives~$O_\meet(u) \cup O_\meet(v) \in \Orn(v \in D)$.
As~$u \in O_\meet(v) \subseteq O_1(v) \cap O_2(v)$ and~$O_1$ and~$O_2$ are ornamentations of~$D$, we have~$O_1(u) \subseteq O_1(v)$ and~$O_2(u) \subseteq O_2(v)$, so that~$O_\meet(u) \subseteq O_1(u) \cap O_2(u) \subseteq O_1(v) \cap O_2(v)$, hence~$O_\meet(u) \cup O_\meet(v) \subseteq O_1(v) \cap O_2(v)$.
By maximality of~$O_\meet(v)$, we conclude that $O_\meet(u) \cup O_\meet(v) \subseteq O_\meet(v)$, so that~$O_\meet(u) \subseteq O_\meet(v)$.
We conclude that~$O_\meet$ is an ornamentation of~$D$.
Moreover, $O_\meet$ is clearly the meet of~$O_1$ and~$O_2$ in componentwise inclusion.

Given two ornamentations~$O_1$ and~$O_2$ of~$D$, consider now the map~$O_\join$ on~$V$ where~$O_\join(v)$ is the inclusion minimal subset~$U$ of~$V$ containing~$v$ and such that~$u \in U$ implies~$O_1(u) \cup O_2(u) \subseteq U$.
Note that~$O_\join(v)$ is well defined as it can be constructed by induction, starting from~$U = \{v\}$ and adding inductively~$O_1(u) \cup O_2(u)$ for all~$u \in U$ until it stabilizes.
Since~$O_1(u) \cup O_2(u) \in \Orn(u \in D)$ by \cref{lem:unionOrnaments}, this inductive construction maintains the invariant that there is a path from~$u$ to~$v$ in~$U$ for any~$u \in U$.
Hence, we obtain that~$O_\join(v) \in \Orn(v \in D)$ for any~$v \in V$.
Consider now~$u,v \in V$ such that~$u \in O_\join(v)$.
Since~$u \in O_\join(v)$ and~$w \in O_\join(v)$ implies~$O_1(w) \cup O_2(w) \subseteq O_\join(v)$, we obtain that~$O_\join(u) \subseteq O_\join(v)$ by minimality of~$O_\join(u)$.
We conclude that~$O_\join$ is an ornamentation of~$D$.
Moreover, $O_\join$ is clearly the join of~$O_1$ and~$O_2$ in componentwise inclusion.
\end{proof}

\begin{example}
The ornamentation lattice of the graph with a single edge is a $2$-elements chain.
The ornamentation lattice of a graph with no path of length $2$ is a boolean lattice (see \eg \cref{fig:ornamentationsNI}\,(left) and \cref{fig:ornamentationsKT}).
%In general, the ornamentation lattice~$\Orn(D \sqcup D')$ of the disjoint union of two directed graphs~$D$ and~$D'$ is the Cartesian product~$\Orn(D) \times \Orn(D')$ of the ornamentation lattices of~$D$ and~$D'$
\end{example}

\begin{example}
The ornamentation lattice of a $n$-elements path is isomorphic to the Tamari lattice on binary trees with $n$ nodes (see \eg \cref{fig:ornamentationsNI}\,(right)).
The isomorphism is obtained trough tubings (or equivalently bracket vectors).
\end{example}

\begin{remark}
\label{rem:posetPropertiesOrnamentations}
A few poset properties of the ornamentations lattice~$\Orn(D)$:
\begin{itemize}
\item The minimal ornamentation sends each vertex~$v \in V$ to the singleton~$\{v\}$, and the maximal ornamentation sends each vertex~$v \in V$ to the set~$U$ of vertices with a path to~$v$ in~$D$.
\item Two ornamentations~$O_1$ and~$O_2$ of~$D$ form a cover relation if and only if there is~$u, v \in V$ such that~$u \notin O_1(v)$ and~$O_2(v) = O_1(u) \cup O_1(v)$, while~$O_1(w) = O_2(w)$ for all~$w \in V \ssm \{v\}$.
\item For any~$U \subseteq V$, the ornamentation lattice of the subgraph~$D_U$ of~$D$ induced by~$U$ is an interval of the ornamentation lattice of~$D$ (namely, the bottom interval below the ornamentation of~$D$ where~$O(u)$ is the set of vertices of~$U$ with a path to~$u$ in~$U$ for all~$u \in U$, while~$O(v)$ is the singleton~$\{v\}$ for all~$v \in V \ssm U$).
\end{itemize}
\end{remark}

\begin{remark}
A few lattice properties of the ornamentation lattice~$\Orn(D)$:
\begin{itemize}
\item The join irreducible ornamentations of~$D$ are precisely the ornamentations~$\Orn_P$ described in \cref{rem:posetPropertiesOrnamentations} for the directed paths~$P$ in~$D$ which admit no shortcut in~$D$. (The meet irreducible ornamentations are more complicated to describe.)
\item $\Orn(D)$ is distributive if and only if~$D$ contains no path of length~$2$ (in which case, $\Orn(D)$ is actually a boolean lattice).
\item $\Orn(D)$ is semidistributive if and only if~$D$ is a directed tree.
\end{itemize}
\end{remark}

\begin{figure}[p]
	\centerline{\includegraphics[scale=.7]{ornamentationsX}}
	\caption{The ornamentation lattice~$\Orn(\Xgraph)$.}
	\label{fig:ornamentationsX}
\end{figure}

\begin{figure}
	\centerline{\includegraphics[scale=.7]{ornamentationsD}}
	\caption{The ornamentation lattice~$\Orn(\Dgraph)$.}
	\label{fig:ornamentationsD}
\end{figure}

\begin{figure}
	\centerline{\includegraphics[scale=.7,valign=c]{ornamentationsK}\qquad\includegraphics[scale=.7,valign=c]{ornamentationsT}}
	\caption{The ornamentation lattices~$\Orn(\Kgraph)$ and~$\Orn(\Tgraph)$.}
	\label{fig:ornamentationsKT}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Reorientations}
\label{subsec:reorientations}

We now consider reorientations of graphs.

\begin{definition}
\label{def:Reori}
A \defn{reorientation}~$R$ of a directed graph~$E$ is a directed graph obtained from~$E$ by reversing a subset~$\rev(R)$ of arrows of~$E$.
The \defn{reorientation lattice}~$\Reori(E)$ of~$E$ is the boolean lattice of reorientations of~$E$, ordered by inclusion of subsets of reversed arrows, meaning $R_1 \le R_2$ if ${\rev(R_1) \subseteq \rev(R_2)}$.
\end{definition}

In this paper, we actually need to consider the reorientation lattice~$\Reori(\tc(D))$ of the transitive closure~$\tc(D)$ of the directed graph~$D$.
Recall that, for all~$u,v \in V$, the transitive closure~$\tc(D)$ has an arc~$(u,v)$ if and only if~$D$ has a directed path from~$u$ to~$v$.
There is a natural surjection from the reorientation lattice~$\Reori(\tc(D))$ to the ornamentation lattice~$\Orn(D)$.

\begin{definition}
\label{def:Reori2Orn}
For a reorientation~$R$ of~$\tc(D)$, we define a map~$\orn{R}$ on~$V$ which associates to each vertex~$v \in V$ the inclusion maximal ornament of~$D$ at~$v$ contained in the subset of vertices~$u \in V$ with a directed path to~$v$ in $\rev(R)$.
\end{definition}

\begin{lemma}
\label{lem:Reori2Orn1}
For any reorientation~$R$ of~$\tc(D)$, the map~$\orn{R}$ is an ornamentation of~$D$.
\end{lemma}

\begin{proof}
By definition, $\orn{R}(v) \in \Orn(v \in D)$ for all~$v \in V$.
Consider now~$u,v \in V$ such that~$u \in \orn{R}(v)$.
Since~$\orn{R}(u) \in \Orn(u \in D)$ and~$\orn{R}(v) \in \Orn(v \in D)$ with~${u \in \orn{R}(v)}$, \cref{lem:unionOrnaments} gives~$\orn{R}(u) \cup \orn{R}(v) \in \Orn(v \in D)$.
Moreover, by path concatenation, there is a path from any vertex of~$\orn{R}(u) \cup \orn{R}(v)$ to~$v$ in~$\rev(R)$.
By maximality of~$\orn{R}(v)$, we conclude that~$\orn{R}(u) \subseteq \orn{R}(v)$, so that~$\orn{R}(u) \subseteq \orn{R}(v)$.
\end{proof}

\begin{lemma}
\label{lem:Reori2Orn2}
The map~$R \mapsto \orn{R}$ is order-preserving (meaning that~$R_1 \le R_2 \implies \orn{R_1} \le \orn{R_2}$).
\end{lemma}

\begin{proof}
If~$R_1 \le R_2$, then $\rev(R_1) \subseteq \rev(R_2)$, hence any path in~$\rev(R_1)$ is a path in~$\rev(R_2)$, so that~$\orn{R_1}(v) \subseteq \orn{R_2}(v)$ for any~$v \in V$, hence~$\orn{R_1} \le \orn{R_2}$.
\end{proof}

\begin{definition}
\label{def:Orn2Reori}
For an ornamentation~$O$ of~$D$, we define a reorientation~$\reori{O}$ of~$\tc(D)$ where for each~$(u,v) \in \tc(D)$, we have~$(u,v) \in \rev(\reori{O})$ if and only if~$u \in O(v)$.
\vincent{This map is not compatible with acyclicity later... But I don't see how to fix that.}
\end{definition}

\begin{lemma}
\label{lem:Orn2Reori1}
The map~$O \mapsto \reori{O}$ is order-preserving.
\end{lemma}

\begin{proof}
If~$O_1 \le O_2$, then $O_1(v) \subseteq O_2(v)$ for all~$v \in V$, thus~$\rev(\reori{O_1}) \subseteq \rev(\reori{O_2})$, hence~${\reori{O_1} \le \reori{O_2}}$.
\end{proof}

\begin{lemma}
\label{lem:Orn2Reori2}
For any ornamentation~$O$ of~$D$, we have~$\orn{\reori{O}} = O$. In other words, the map~${O \mapsto \reori{O}}$ is a section of the map~$R \mapsto \orn{R}$.
\end{lemma}

\begin{proof}
Let~$u,v \in V$ such that there is a path from~$u$ to~$v$ in~$\rev(\reori{O})$.
Let~$u = w_0, w_1, \dots, w_p = v$ denote the vertices along this path.
We have~$(w_{i-1},w_i) \in \rev(\reori{O})$ hence~$w_{i-1} \in O(w_i)$ for each~$1 \le i \le p$.
Since~$O$ is an ornamentation, an immediate induction shows that~$w_i \in O(v)$ for all~$0 \le i \le p$.
We conclude that $u \in O(v)$ if and only if there is a path from~$u$ to~$v$ in~$\rev(\reori{O})$.
Since~$O(v)$ is an ornament of~$D$ at~$v$, we conclude that~$\orn{\reori{O}}(v) = O(v)$.
\end{proof}

To sum up, we obtained the following statement.

\begin{proposition}
\label{prop:Reori2Orn}
The map~$R \mapsto \orn{R}$ is an order-preserving surjection from the reorientation lattice~$\Reori(\tc(D))$ to the ornamentation lattice~$\Orn(D)$.
\end{proposition}

\begin{remark}
\label{rem:Orn2ReoriMiddle}
In general, the reorientation~$\reori{O}$ is neither minimal nor maximal among the reorientations~$R$ of~$\tc(D)$ such that~$\orn{R} = O$.
For instance, the following three reorientations belong to the fiber of the ornamentation $O = \!\!\raisebox{-.25cm}{\includegraphics[scale=.8]{ornamentationI7}}$:
\[
\raisebox{-.23cm}{\includegraphics[scale=.8]{reorientationI9}}\!\! < \reori{O} = \!\!\!\!\raisebox{-.23cm}{\includegraphics[scale=.8]{reorientationI10}}\!\! < \!\!\raisebox{-.23cm}{\includegraphics[scale=.8]{reorientationI11}}
\]
\end{remark}

\begin{remark}
\label{rem:Reori2OrnIntervals1}
The fibers of the surjection~$R \mapsto \orn{R}$ do not all admit a minimum nor a maximum.
For instance, 
\begin{itemize}
\item the fiber of \raisebox{-.25cm}{\includegraphics[scale=.8]{ornamentationI5}} has two minima \!\!\raisebox{-.23cm}{\includegraphics[scale=.8]{reorientationI5}}\!\! and \!\!\raisebox{-.23cm}{\includegraphics[scale=.8]{reorientationI6}}\!\!\!\!,
\item the fiber of \raisebox{-.25cm}{\includegraphics[scale=.8]{ornamentationI6}} has two maxima \!\!\raisebox{-.23cm}{\includegraphics[scale=.8]{reorientationI7}}\!\! and \!\!\raisebox{-.23cm}{\includegraphics[scale=.8]{reorientationI8}}\!\!\!\!.
\end{itemize}
We will see later in \cref{prop:Reori2OrnMaxTree} that the fibers always admit a maximum when~$D$ is a directed tree.
\end{remark}

\begin{remark}
\label{rem:Reori2OrnSemilatticeMap}
The surjection~$R \mapsto \orn{R}$ does not preserve neither the meet nor the join semilattice structure.
For instance,

\centerline{
\begin{tabular}{c@{$\;\join\;$}c@{\;}c@{\;}c@{\qquad\text{and}\qquad}c@{$\;\meet\;$}c@{\;}c@{\;}c@{}c}
	\raisebox{-.2cm}{\includegraphics[scale=.8]{reorientationI1}} &
	\raisebox{-.2cm}{\includegraphics[scale=.8]{reorientationI2}} &
	$=$ &
	\raisebox{-.2cm}{\includegraphics[scale=.8]{reorientationI3}} &
	\raisebox{-.2cm}{\includegraphics[scale=.8]{reorientationI3}} &
	\raisebox{-.2cm}{\includegraphics[scale=.8]{reorientationI4}} &
	$=$ &
	\raisebox{-.2cm}{\includegraphics[scale=.8]{reorientationI2}} &
	,
	\\
	\raisebox{-.2cm}{\includegraphics[scale=.8]{ornamentationI1}} &
	\raisebox{-.2cm}{\includegraphics[scale=.8]{ornamentationI2}} &
	$\ne$ &
	\raisebox{-.2cm}{\includegraphics[scale=.8]{ornamentationI3}} &
	\raisebox{-.2cm}{\includegraphics[scale=.8]{ornamentationI3}} &
	\raisebox{-.2cm}{\includegraphics[scale=.8]{ornamentationI4}} &
	$\ne$ &
	\raisebox{-.2cm}{\includegraphics[scale=.8]{ornamentationI2}} &
	.
\end{tabular}
}

\medskip\noindent
To correct this default, we can restrict our attention to transitively closed reorientations of~$\tc(D)$.
\end{remark}

\begin{definition}
\label{def:transitivelyClosed}
A reorientation~$R$ of~$\tc(D)$ is \defn{transitively closed} if~$\rev(R)$ is transitively closed %, that is~$(u,v), (v,w) \in \rev(R)$ implies $(u,w) \in \rev(R)$.
and \defn{transitively coclosed} if the complement~$\tc(D) \ssm \rev(R)$ is transitively closed.
We denote by~$\Rcl(\tc(D))$ and $\Rco(\tc(D))$ the sets of transitively closed and transitively coclosed reorientations of $\tc(D)$ respectively.
\end{definition}

\begin{lemma}
\label{lem:rcl-subsemilattice}
$\Rcl(\tc(D))$ (resp.~$\Rco(\tc(D))$) induces a meet (resp.~join) subsemilattice of~$\Reori(\tc(D))$, which is a lattice.
\end{lemma}

\begin{proof}
As the intersection of two transitively closed relations is transitively closed, $R_1, R_2 \in \Rcl(\tc(D))$ implies $R_1 \meet R_2 \in \Rcl(\tc(D))$.
As~$\tc(D)$ is transitively closed, the maximal reorientation of~$\tc(D)$ is transitively closed, so that $\Rcl(\tc(D))$ is a bounded meet semilattice, hence a lattice.
The proof for~$\Rco(\tc(D))$ is symmetric.
\end{proof}

\begin{remark}
Observe however that~$\Rcl(\tc(D)) \cap \Rco(\tc(D))$ may be neither a meet nor a join subsemilattice of~$\Reori(\tc(D))$.
\vincent{todo if we indeed keep the definition of the transitively coclosed reorientations.}
\end{remark}

\begin{proposition}
\label{prop:ReoriTC2Orn}
For any ornamentation~$O$ of~$D$, the reorientation~$\reori{O}$ is transitively closed.
Hence, the map~$R \mapsto \orn{R}$ restricts to a surjection from the transitively closed reorientation lattice~$\Rcl(\tc(D))$ to the ornamentation lattice~$\Orn(D)$.
\end{proposition}

\begin{proof}
Let~$u,v,w \in V$ such that~$(u,v), (v,w) \in \rev(\reori{O})$.
Then~$u \in O(v)$ and~$v \in O(w)$, so that~$u \in O(w)$ since~$O$ is an ornamentation.
Hence~$(u,w) \in \rev(\reori{O})$.
\end{proof}

\begin{remark}
\label{rem:notTransitivelyCoclosed}
Note that~$\reori{O}$ is not always transitively coclosed.
For instance,
\[
O = \!\!\includegraphics[scale=.8,valign=c]{cyclicOrnamentationD1} \qquad \reori{O} = \!\!\includegraphics[scale=.8,valign=c]{cyclicReorientationD1}
.
\]
We will see in \cref{lem:Orn2ReoriT} that $\reori{O}$ is both transitively closed and coclosed when~$D$ is a directed tree.
\end{remark}

This surjection behaves much nicer with respect to \cref{rem:Orn2ReoriMiddle,rem:Reori2OrnIntervals1,rem:Reori2OrnSemilatticeMap}.

\begin{proposition}
\label{prop:Reori2OrnMinTC}
For any ornamentation~$O$ of~$D$, the reorientation~$\reori{O}$ is the minimum transitively closed reorientation~$R$ of~$\tc(D)$ with~$\orn{R} = O$.
\end{proposition}

\begin{proof}
Consider any transitively closed reorientation~$R$ of~$\tc(D)$ such that~$\orn{R} = O$.
Let~$u,v \in V$ be such that~$(u,v) \in \rev(\reori{O})$, that is, such that~$u \in O(v)$.
By definition of~$\orn{R}(v) = O(v)$, there is a directed path from~$u$ to~$v$ in~$\rev(R)$.
As $R$ is transitively closed, this implies that~$(u,v) \in \rev(R)$.
We conclude that~$\rev(\reori{O}) \subseteq \rev(R)$, so that~$\reori{O} \le R$.
\end{proof}

\begin{remark}
\label{rem:Reori2OrnIntervals2}
Note that the second example of \cref{rem:Reori2OrnIntervals1} shows that the set of transitively closed reorientations~$R$ of~$\tc(D)$ such that~$\orn{R} = O$ does not admit a maximum either.
We will see in \cref{prop:ReoriTC2OrnIntervalT} that it does if~$D$ is a directed tree.
\end{remark}

\begin{proposition}
\label{prop:Reori2OrnMeetSemilaticeTC}
The map~$R \mapsto \orn{R}$ is a meet semilattice morphism from the transitively closed reorientation lattice~$\Rcl(\tc(D))$ to the ornamentation lattice~$\Orn(D)$.
\end{proposition}

\begin{proof}
Given two transitively closed reorientations~$R_1$ and~$R_2$ of $\tc(D)$, we want to show that $\orn{R_1 \meet R_2} = \orn{R_1} \meet \orn{R_2}$.
Since~$R \mapsto \orn{R}$ is order-preserving (\cref{lem:Reori2Orn2}) and~$R_1 \meet R_2 \le R_1$ and~$R_1 \meet R_2 \le R_2$, we have~$\orn{R_1 \meet R_2} \le \orn{R_1}$ and~$\orn{R_1 \meet R_2} \le \orn{R_2}$, hence~$\orn{R_1 \meet R_2} \le \orn{R_1} \meet \orn{R_2}$.

Conversely, consider~$u \in (\orn{R_1} \meet \orn{R_2})(v)$.
There exists a path~$u = w_0, w_1, \dots, w_p = v$ in $(\orn{R_1} \meet \orn{R_2})(v) \subseteq \orn{R_1}(v) \cap \orn{R_2}(v)$ (by \cref{thm:OrnMeetJoin}).
By definition of $\orn{R_1}$ and $\orn{R_2}$, there is a path from each $w_i$ to $v$ in both $\rev(R_1)$ and $\rev(R_2)$.
Since~$R_1$ and~$R_2$ are both transitively closed, each arrow $(w_i,v)$ of $\tc(D)$ is in both~$\rev(R_1)$ and~$\rev(R_2)$,
and therefore in $\rev(R_1) \cap \rev(R_2) = \rev(R_1 \meet R_2)$ (by \cref{lem:rcl-subsemilattice}).
So, $\{u = w_0, w_1, \dots, w_p = v\} \in \Orn(v \in D)$ and each $w_i$ has a directed path to $v$ in $\rev(R_1) \cap \rev(R_2)$.
By maximality of $\orn{R_1 \meet R_2}(v)$, we deduce $u \in \orn{R_1 \meet R_2}(v)$.
Thus, we have shown that $\orn{R_1} \meet \orn{R_2} \le \orn{R_1 \meet R_2}$, and we conclude that~$\orn{R_1 \meet R_2} = \orn{R_1} \meet \orn{R_2}$.
%
%Conversely, let $u \in \orn{R_1 \meet R_2}(v)$.
%There is a path $u = w_0, w_1, \dots, w_p = v$ in $\orn{R_1 \meet R_2}(v)$.
%Thus, each arrow $(w_i,v)$ of $\tc(D)$ is in $\rev(R_1 \meet R_2) = \rev(R_1) \cap \rev(R_2)$,
%showing that this same path is contained in both $\orn{R_1}(v)$ and $\orn{R_2}(v)$.
%By \cref{thm:OrnMeetJoin}, $\{u = w_0, w_1, \dots, w_p = v\} \subseteq O_\meet(v)$.
%Thus, we have shown that $O_\meet \geq \orn{R_1 \meet R_2}$.
\vincent{I removed the second part of the argument as it immediately follows from the order preserving condition.}
\end{proof}

\begin{remark}
In contrast, the first example of \cref{rem:Reori2OrnSemilatticeMap} shows that the map~$R \mapsto \orn{R}$ is not necessarily a join semilattice morphism from the transitively closed reorientation lattice~$\Rcl(\tc(D))$ to the ornamentation lattice~$\Orn(D)$, even when~$D$ is a (rooted) tree.
\end{remark}

\vincent{Can we say similar things about the restriction of the map~$R \mapsto \orn{R}$ to transitively coclosed reorientations of~$\tc(D)$? If not, we should only define transitively closed reorientations...}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Sourcings}
\label{subsec:sourcings}

We now assume that~$V$ is totally ordered, say that~$V = [n]$ with the natural order.
%We now assume that~$D$ is an increasing graph on~$V = [n]$.
We consider the following maps on hypergraphs (they are usually called orientations of hypergraphs, we have preferred the term sourcings of hypergraphs to avoid confusion with the reorientations of graphs).

\begin{definition}
\label{def:Sour}
A \defn{sourcing}~$S$ of a hypergraph~$\HH$ on~$V$ is a map~$S : \HH \to V$ such that~$S(H) \in H$ for all hyperedges~$H \in \HH$.
We denote by~$\rev(S)$ the pairs~$(u,v) \in V^2$ with~$u < v$ and such that there is~$H \in \HH$ with~$u \in H$ and~$v = S(H)$.
The \defn{sourcing lattice}~$\Sour(\HH)$ is the lattice of sourcings of~$\HH$ ordered componentwise, meaning~$S_1 \le S_2$ if~$S_1(H) \le S_2(H)$ for all~$H \in \HH$.
In other words, $\Sour(\HH)$ is the Cartesian product of the subchains of~$V$ induced by the hyperedges~$\HH$.
\end{definition}

%In this paper, we will consider sourcings of the interval hypergraph of~$D$.
%
%\begin{definition}
%Let~$D$ be a directed graph on~$V$.
%For~$u,v \in V$, the \defn{interval}~$[u,v]$ is the union of all directed paths from~$u$ to~$v$.
%The \defn{interval hypergraph} of~$D$ is the collection~$\II$(D) of non-empty intervals~$[u,v]$ for all~$u,v \in V$.
%\end{definition}

We now assume that~$D$ is an increasing graph on~$V = [n]$, and we consider sourcings of the path hypergraph of~$D$.

\begin{definition}
\label{def:pathHypergraph}
The \defn{path hypergraph} of a directed graph~$D$ is the collection~$\PP(D)$ of vertex sets of directed paths in~$D$.
\end{definition}

We first observe that any sourcing~$S$ of~$\PP(D)$ can be lifted to a reorientation~$\reori{S}$ of~$\tc(D)$

\begin{definition}
\label{def:Sour2Reori}
For a sourcing~$S$ of~$\PP(D)$, we denote by~$\reori{S}$ the reorientation of~$\tc(D)$ defined by~$\rev(\reori{S}) = \rev(S)$.
\vincent{This map is not compatible with acyclicity later... But I don't see how to fix that.}
\end{definition}

\begin{lemma}
\label{lem:Sour2Reori}
The map~$S \mapsto \reori{S}$ is order-preserving.
\end{lemma}

\begin{proof}
If~$S_1 \le S_2$, then $\rev(S_1) \subseteq \rev(S_2)$, hence $\rev(\reori{S_1}) \subseteq \rev(\reori{S_2})$, hence~$\reori{S_1} \le \reori{S_2}$.
\end{proof}

In contrast, not all reorientations of~$\tc(D)$ can be projected to a sourcing of~$\PP(D)$, because reorientations might have cycles inside paths of~$D$.
We will fix this problem by restricting to acyclic reorientations and acyclic sourcings in \cref{sec:acyclic}.
At the moment, we thus need define a map from all sourcings of~$\PP(D)$ to all ornamentations of~$D$.

\begin{definition}
\label{def:Sour2Orn}
For a sourcing~$S$ of~$\PP(D)$, we define a map~$\orn{S}$ on~$V$ which associates to each vertex~$v \in V$ the inclusion maximal ornament of~$D$ at~$v$ contained in the subset of vertices~$u \in V$ with a directed path to~$v$ in $\rev(S)$. % such that there is~$P_0, \dots, P_k \in \PP(D)$ with~$u \in P_0 \ssm \{S(P_0)\}$, $v = S(P_k)$, and~$S(P_{i-1}) \in P_i \ssm \{S(P_i)\}$ for~all~$i \in [k]$.
\end{definition}

\begin{lemma}
\label{lem:Sour2Orn1}
For any sourcing~$S$ of~$\PP(D)$, we have~$\orn{S} = \orn{\reori{S}}$.
\end{lemma}

\begin{proof}
Immediate from \cref{def:Reori2Orn,def:Sour2Reori,def:Sour2Orn}.
\end{proof}

\begin{lemma}
\label{lem:Sour2Orn2}
For any sourcing~$S$ of~$\PP(D)$, the map~$\orn{S}$ is an ornamentation of~$D$.
\end{lemma}

\begin{proof}
%The proof is identical to that of~\cref{lem:Reori2Orn1}.
Follows from~\cref{lem:Reori2Orn1,lem:Sour2Orn1}.
\end{proof}

\begin{lemma}
\label{lem:Sour2Orn3}
The map~$S \mapsto \orn{S}$ is order-preserving.
\end{lemma}

\begin{proof}
%The proof is identical to that of~\cref{lem:Reori2Orn2}.
Follows from~\cref{lem:Reori2Orn2,lem:Sour2Reori,lem:Sour2Orn1}.
%If~$S_1 \le S_2$, then $\rev(S_1) \subseteq \rev(S_2)$, hence any path in~$\rev(S_1)$ is a path in~$\rev(S_2)$, so that~$\orn{S_1}(v) \subseteq \orn{S_2}(v)$ for any~$v \in V$, hence~$\orn{S_1} \le \orn{S_2}$.
\end{proof}

\begin{definition}
\label{def:Orn2Sour}
For an ornamentation~$O$ of~$D$, we define a sourcing~$\sour{O}$ of~$\PP(D)$ where the source~$\sour{O}(P)$ for a path~$P$ from~$u$ to~$v$ in~$D$ is the maximal~$w \in P$ such that~$u \in O(w)$.
\vincent{This map is not compatible with acyclicity later... But I don't see how to fix that.}
\end{definition}

\begin{lemma}
\label{lem:Orn2Sour1}
The map~$O \mapsto \sour{O}$ is order-preserving.
\end{lemma}

\begin{proof}
Assume that~$O_1 \le O_2$, so that~$O_1(v) \subseteq O_2(v)$ for all~$v \in V$.
Consider any path~$P$ from~$u$ to~$v$, and let~$w \eqdef \sour{O_1}(P)$.
Then we have~$u \in O_1(w) \subseteq O_2(w)$, so that~$\sour{O_2}(u) \ge w$ by definition.
Therefore, $\sour{O_1}(P) \le \sour{O_2}(P)$ for any path~$P \in \PP(D)$, hence~${\sour{O_1} \le \sour{O_2}}$.
\end{proof}

\begin{lemma}
\label{lem:Orn2Sour2}
For any ornamentation~$O$ of~$D$, we have~$\orn{\sour{O}} = O$. In other words, the map~${O \mapsto \sour{O}}$ is a section of the map~$S \mapsto \orn{S}$.
\end{lemma}

\begin{proof}
Let~$u,v \in V$.
If~$u \in O(v)$, then there is a path~$P$ from~$u$ to~$v$ in~$O(v)$, hence~$(u,v) \in \rev(\sour{O})$.
Assume that there is a path from~$u$ to~$v$ in~$\rev(\sour{O})$.
Let~$u = w_0 \le w_1 \le \dots \le w_p = v$ denote the vertices along this path.
For each $1 \le i \le p$, there is a path~$P_i$ in~$D$ such that~$w_{i-1} \in P_i$ and~$w_i = \sour{O}(P_i)$, hence~$w_{i-1} \in O(w_i)$.
Since~$O$ is an ornamentation, an immediate induction shows that~$w_i \in O(v)$ for all~$0 \le i \le p$.
We conclude that $u \in O(v)$ if and only if there is a path from~$u$ to~$v$ in~$\rev(\sour{O})$.
Since~$O(v)$ is an ornament of~$D$ at~$v$, we conclude that~$\orn{\sour{O}}(v) = O(v)$.
\end{proof}

\begin{lemma}
\label{lem:Orn2Sour3}
For any ornamentation~$O$ of~$D$, we have~$\reori{O} = \reori{\sour{O}}$.
\end{lemma}

\begin{proof}
As~$\rev(\reori{O}) = \set{(u,v)}{u \in O(v)}$ by \cref{def:Orn2Reori} and~$\rev(\reori{\sour{O}}) = \rev(\sour{O})$ by \cref{def:Sour2Reori}, we just need to prove that~$(u,v) \in \rev(\sour{O}) \iff u \in O(v)$.
By \cref{def:Sour}, $(u,v) \in \rev(\sour{O})$ if and only if there is~$P \in \PP(D)$ such that~$u \in P$ and~$v = \sour{O}(P)$.
If there is a path~$P$ with~$u \in P$ and~$v = \sour{O}(P)$, then~$u \in O(v)$ by \cref{def:Orn2Sour}.
Conversely, if~$u \in O(v)$, there is a path~$P$ from~$u$ to~$v$ in~$O(v)$.
For this path, we have~$u \in P$ and~$v = \sour{O}(P)$ by \cref{def:Orn2Sour} since~$u \in O(v)$.
\end{proof}

\begin{remark}
Note however that there are sourcings~$S$ of~$\PP(D)$ with~$\reori{S} \ne \reori{\orn{S}}$.
For instance, on the graph~\includegraphics[scale=.8,valign=c]{graphI}, for the sourcing~$S$ given by~$S(\{1,2\}) = 1$, $S(\{2,3\}) = 2$ and~$S(\{1,3\}) = 3$, we have $\orn{S} = \raisebox{-.2cm}{\includegraphics[scale=.8]{ornamentationI1}}$ so that
\[
\reori{S} = \raisebox{-.2cm}{\includegraphics[scale=.8]{reorientationI1}} \ne \raisebox{-.2cm}{\includegraphics[scale=.8]{reorientationI0}} = \reori{\orn{S}}.
\]
\end{remark}

To sum up, we obtained the following statement.

\begin{proposition}
The map~$S \mapsto \orn{S}$ is an order-preserving surjection from the sourcing lattice~$\Sour(\PP(D))$ to the ornamentation lattice~$\Orn(D)$.
\end{proposition}

\begin{remark}
The map~$S \mapsto \orn{S}$ is obviously not injective.
For instance, $\orn{S}$ is the maximal ornamentation of~$D$ for any sourcing~$S$ of~$\PP(D)$ such that~$S(\{u,v\}) = v$ for each edge~$(u,v)$ of~$D$.
In contrast, we will see in \cref{sec:acyclic} that~$S \mapsto \orn{S}$ is injective on acyclic sourcings of~$\PP(D)$.
\end{remark}

\vincent{We can play the same game with transitively closed sourcings~$S$, meaning for which $\rev(S)$ is transitively closed... Maybe just a remark about it is enough...}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Acyclic reorientations, acyclic sourcings, and acyclic ornamentations}
\label{sec:acyclic}

We now focus our attention on the acyclic situation.
We assume here that~$D$ is an increasing graph on~$V = [n]$, meaning that $i < j$ for any arc~$(i,j)$ of~$D$, in particular~$D$ is acyclic.
We then consider the acyclic reorientation poset~$\AReori(\tc(D))$ (\cref{subsec:acyclicReorientations}), the acyclic sourcing poset~$\ASour(\PP(D))$ (\cref{subsec:acyclicSourcings}), and the acyclic ornamentation poset~$\AOrn(D)$ (\cref{subsec:acyclicOrnamentations}), and define natural surjective poset morphisms:
\[
\begin{array}{rcccccl}
	\fS_n & \surjection & \AReori(\tc(D)) & \surjection & \ASour(\PP(D)) & \bijection & \AOrn(D) \\
	\pi & \longmapsto & \areori{\pi} \qquad R & \longmapsto & \asour{R} \qquad S & \longmapsto & \aorn{S}
\end{array}
.
\]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Acyclic reorientations}
\label{subsec:acyclicReorientations}

Acyclic reorientations of directed acyclic graphs is a classical subject, see for instance~\cite{Pilaud-acyclicReorientationLattices}.

\begin{definition}
\label{def:AReori}
A reorientation of a directed graph~$E$ is \defn{acyclic} if it contains no directed cycle.
The \defn{acyclic reorientation poset}~$\AReori(E)$ is the subposet of the reorientation lattice~$\Reori(E)$ induced by acyclic reorientations.
\end{definition}

\begin{remark}
Let us recall the polytopal interpretation of the acyclic reorientation poset of~$E$.
Denote by~$(\b{e}_i)_{i \in [n]}$ the standard basis of~$\R^n$.
The \defn{graphical zonotope} of~$E$ is the Minkowski sum~$\simplex_E \eqdef \sum_{(u,v) \in E} \simplex_{uv}$, where~$\simplex_{uv}$ is the segment with endpoints~$\b{e}_u$ and~$\b{e}_v$.
The face lattice of~$\simplex_E$ is described by ordered partitions of~$E$.
In particular, the graph of~$\simplex_E$, oriented in the direction~$\b{\omega} \eqdef (n, n-1, \dots, 2, 1) - (1, 2, \dots, n-1, n) = (n-1, n-3, \dots, 3-n, 1-n)$, is isomorphic to the Hasse diagram of the acyclic reorientation poset~$\AReori(E)$.
\end{remark}

Note that the acyclic reorientation poset~$\AReori(E)$ is not always a lattice.
The lattice theory of acyclic reorientation posets was studied in details in~\cite{Pilaud-acyclicReorientationLattices}.
For our purposes, we will only need the following characterizations.

\begin{proposition}[{\cite[Thm.~1]{Pilaud-acyclicReorientationLattices}}]
\label{prop:AReoriLat}
The acyclic reorientation poset~$\AReori(E)$ is a lattice if and only if the transitive reduction of any induced subgraph of~$E$ is a forest.
\end{proposition}

\begin{proposition}[{\cite[Thm.~9]{Pilaud-acyclicReorientationLattices}}]
\label{prop:AReoriLatJoinMeet}
When the acyclic reorientation poset~$\AReori(E)$ is a lattice, the meet and join of two acyclic reorientations~$R_1$ and~$R_2$ of~$E$ are given by
\begin{align*}
\rev(R_1 \join R_2) & = E \;\cap\; \tc \!\big( \rev(R_1) \cup \rev(R_2) \big) \\
\text{and}\qquad
E \ssm \rev(R_1 \meet R_2) & = E \;\cap\; \tc \!\big( E \ssm (\rev(R_1) \cap \rev(R_2)) \big).
\end{align*}
\end{proposition}

We now recall the standard map from permutations to acyclic orientations.

\begin{definition}
For a permutation~$\pi$ of~$[n]$, we denote by~$\areori{\pi}$ the reorientation of~$\tc(D)$ where $(u,v) \in \tc(D)$ is reoriented in~$\areori{\pi}$ if~$\pi^{-1}(u) > \pi^{-1}(v)$.
\end{definition}

\begin{proposition}
\label{prop:Perm2AReori}
The map~$\pi \mapsto \areori{\pi}$ is an order-preserving surjection from the weak order~$\fS_n$ to the acyclic reorientation poset~$\AReori(\tc(D))$.
\end{proposition}

\begin{proof}
Recall that the weak order on~$\fS_n$ is defined by the inclusion of inversion sets, where the inversion set of~$\pi \in \fS_n$ is~$\inv(\pi) \eqdef \set{(u,v)}{u < v \text{ and } \pi^{-1}(u) > \pi^{-1}(v)}$.
By definition, we have~$\rev(\areori{\pi}) = \inv(\pi) \cap \tc(D)$, hence~$\pi \mapsto \areori{\pi}$ is order-preserving.
It is surjective since the fiber of any reorientation~$R$ is the set of linear extensions of~$R$, which is non-empty when~$R$ is acyclic.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Acyclic sourcings}
\label{subsec:acyclicSourcings}

Acyclic sourcings of hypergraphs were introduced in~\cite{BenedettiBergeronMachacek,BergeronPilaud} as combinatorial models for the vertex sets of hypergraphic polytopes.

\begin{definition}
\label{def:ASour}
A sourcing~$S$ of a hypergraph~$\HH$ is \defn{acyclic} if there is no distinct~$H_0, \dots, H_k \in \HH$ such that~$S(H_{i-1}) \in H_i \ssm \{S(H_i)\}$ for all~$i \in [k]$ and~$S(H_k) \in H_0 \ssm \{S(H_0)\}$.
The \defn{acyclic sourcing poset}~$\ASour(\HH)$ is the subposet of the sourcing lattice~$\Sour(\HH)$ induced by acyclic sourcings.
\end{definition}

\begin{remark}
Let us recall the polytopal interpretation of the acyclic sourcing poset of a hypergraph~$\HH$.
We still denote by~$(\b{e}_i)_{i \in [n]}$ the standard basis of~$\R^n$.
The \defn{hypergraphic polytope} of~$\HH$ is the Minkowski sum
\(
\simplex_\HH \eqdef \sum_{H\in \HH} \simplex_H\,,
\)
where $\simplex_H$ is the simplex given by the convex hull of the points $\b{e}_h$ for~$h \in H$.
The face lattice of~$\simplex_\HH$ was described combinatorially in terms of acyclic orientations of~$\HH$ in~\cite{BenedettiBergeronMachacek}.
In particular, the transitive closure of the graph of~$\simplex_\HH$, oriented in the direction~$\b{\omega}$, is isomorphic to the acyclic sourcing poset~$\ASour(\HH)$.
Note that the graph of~$\simplex_\HH$, oriented in the direction~$\b{\omega}$, is not always transitively reduced, hence not always isomorphic to the Hasse diagram of the acyclic sourcing poset~$\ASour(\HH)$.
\end{remark}

\begin{remark}
\label{rem:ASourLat}
Note that the acyclic sourcing poset of~$\HH$ is not always a lattice.
Characterizing the hypergraphs whose acyclic sourcing poset is a lattice seems a difficult question in general.
Such characterizations exist for specific families of hypergraphs, notably for graphs~\cite{Pilaud-acyclicReorientationLattices} (see \cref{prop:AReoriLat}), interval hypergraphs~\cite{BergeronPilaud}, and (partially for) graph associahedra~\cite{BarnardMcConville}.
We will further study this question for subhypergraphs of the path hypergraph of directed trees in \cref{sec:intreevalHypergraphicPosets}.
\end{remark}

We have observed in \cref{subsec:sourcings} that there is no natural surjection from all reorientations of~$\tc(D)$ to all sourcings of~$\PP(D)$.
We now recall that there is such a surjection when focusing on acyclic reorientations and acyclic sourcings.

\begin{definition}
\label{def:AReori2ASour}
For an acyclic reorientation~$R$ of~$\tc(D)$, we denote by~$\asour{R}$ the sourcing on~$\PP(D)$ where~$\asour{R}(P)$ is the source of~$P$ in~$R$ (it is well-defined since any path in~$D$ forms a clique in~$\tc(D)$).
\end{definition}

\begin{lemma}
\label{lem:AReori2ASour1}
For any acyclic reorientation~$R$ of~$\tc(D)$, we have~$\rev(\asour{R}) \subseteq \rev(R)$ .
\end{lemma}

\begin{proof}
Let~$u,v \in V$ be such that~$(u,v) \in \rev(\asour{R})$. 
Then~$u < v$ and there is a path~$P \in \PP(D)$ such that~$u \in P$ and~$v = \asour{R}(P)$.
By definition, $v$ is the source of~$P$ in~$R$.
Since~$P$ forms a clique in~$\tc(D)$, and $R$ is acyclic, we conclude that~$(u,v) \in \rev(R)$.
\end{proof}

\begin{lemma}
\label{lem:AReori2ASour2}
For any acyclic reorientation~$R$ of~$\tc(D)$, the sourcing~$\asour{R}$ is acyclic.
\end{lemma}

\begin{proof}
If~$P_0, \dots, P_k \in \PP(D)$ are such that~$\asour{R}(P_{i-1}) \in P_i \ssm \{\asour{R}(P_i)\}$, then~$\asour{R}(P_k), \dots, \asour{R}(P_0)$ is a directed path in~$R$, so that~$R$ has no edge from~$\asour{R}(P_0)$ to~$\asour{R}(P_k)$ by acyclicity of~$R$, hence~${\asour{R}(P_k) \notin P_0 \ssm \{\asour{R}(P_0)\}}$.
\end{proof}

\begin{lemma}
\label{lem:AReori2ASour3}
The map~$R \mapsto \asour{R}$ is order-preserving.
\end{lemma}

\begin{proof}
%For two acyclic reorientations~$R_1$ and~$R_2$ of~$\tc(D)$, 
If~$R_1 \le R_2$, then~$\rev(R_1) \subseteq \rev(R_2)$, hence the source of any path~$P$ in~$R_1$ is smaller than the source of~$P$ in~$R_2$, hence~$\asour{R_1} \le \asour{R_2}$.
\end{proof}

\begin{remark}
\label{rem:Sour2ReoriIncompatibleAcyclicity}
The reorientation~$\reori{S}$ of~$\tc(D)$ defined in \cref{def:Sour2Reori} by~$\rev(\reori{S}) = \rev(S)$ is not always acyclic even when~$S$ is acyclic.
For instance, consider the directed graph~$D$ and the two reorientations~$R_1$ and~$R_2$ of~$\tc(D)$ given by
\[
D = \! \includegraphics[scale=.8,valign=c]{graphR}
\qquad\qquad
R_1 = \! \includegraphics[scale=.8,valign=c]{reorientationR1}
\qquad\text{and}\qquad
R_2 = \! \includegraphics[scale=.8,valign=c]{reorientationR2}
.
\]
Note that~$R_1$ is acyclic so that~$\asour{R_1}$ is acyclic, and that~$\reori{\asour{R_1}} = R_2$ is cyclic.
We thus need to define a section of the map~$R \mapsto \asour{R}$.
\end{remark}

\begin{definition}
\label{def:ASour2AReori}
Let~$S$ be an acyclic sourcing of~$\PP(D)$.
We denote by $\arr(S)$ the pairs~$(u,v) \in V^2$ such that there is~$P \in \PP(D)$ with~$u \in P$ and~$v = S(P)$.
\vincent{note that we can assume that~$P$ is a path from~$u$ to~$v$. But there might be more than one path since~$D$ is not a tree.}
Let~$\areori{S}$ be the reorientation of~$\tc(D)$ defined by~$\rev(\areori{S}) = \tc(\arr(S)) \cap \tc(D)$.
\end{definition}

\begin{remark}
\label{rem:ASour2AReori}
Note that~$\rev(S) \subseteq \rev(\areori{S})$, but the inclusion might be strict.
In fact, the map~$S \mapsto \areori{S}$ is not order-preserving.
For instance, consider the directed graph~$D$ and the two reorientations~$R_1$ and~$R_2$ of~$\tc(D)$ given by
\[
D = \! \includegraphics[scale=.8,valign=c]{graphR}
\qquad\qquad
R_1 = \! \includegraphics[scale=.8,valign=c]{reorientationR1}
\qquad\text{and}\qquad
R_2 = \! \includegraphics[scale=.8,valign=c]{reorientationR3}
.
\]
Let~$S_1 = \asour{R_1}$ and~$S_2 = \asour{R_2}$.
Then one can check that~$S_1 < S_2$ while~$\areori{S_1} = R_1 \not< R_2 = \areori{S_2}$.
\end{remark}

\begin{lemma}
\label{lem:ASour2AReori1}
For any acyclic sourcing~$S$ of~$\PP(D)$, the reorientation~$\areori{S}$ of~$\tc(D)$ is acyclic.
\end{lemma}

\begin{proof}
If~$\areori{S}$ contains a cycle, so does~$\arr(S)$, so that~$S$ is cyclic by \cref{def:ASour}.
\end{proof}

\begin{lemma}
\label{lem:ASour2AReori2}
For any acyclic sourcing~$S$ of~$\PP(D)$, we have~$\asour{\areori{S}} = S$. In other words, the map~$S \mapsto \areori{S}$ is a section of the map~$R \mapsto \asour{R}$.
\end{lemma}

\begin{proof}
Pick~$P \in \PP(D)$ and let~$v = S(P)$.
For any~$u \in P$, we have~$(u,v) \in \arr(S)$.
If~$u < v$, then~$(u,v) \in \rev(\areori{S})$.
If~$u > v$, then~$(v,u) \notin \tc(\arr(S))$ by acyclicity of~$S$, so that~$(v,u) \notin \rev(\areori{S})$, so that~$(u,v) \in \rev(\areori{S})$ (since $P$ is a tournament in~$\areori{S}$).
Hence, $v$ is the source of~$P$ in~$\areori{S}$, so that~$\asour{\areori{S}}(P) = v = S(P)$.
We conclude that~$\asour{\areori{S}} = S$. 
\end{proof}

To sum up, we obtained the following statement.

\begin{proposition}
\label{prop:AReori2ASour}
The map~$R \mapsto \asour{R}$ is an order-preserving surjection from the acyclic reorientation poset~$\AReori(\tc(D))$ to the acyclic sourcing poset~$\ASour(\PP(D))$.
\end{proposition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Acyclic ornamentations}
\label{subsec:acyclicOrnamentations}

Remember from \cref{def:Reori2Orn} (resp.~\cref{def:Sour2Orn}) that we have defined an ornamentation~$\orn{R}$ (resp.~$\orn{S}$) from any reorientation~$R$ of~$\tc(D)$ (resp.~sourcing~$S$ of~$\PP(D)$).
We now observe that these maps behave well on acyclic reorientations of~$\tc(D)$ and acyclic sourcings of~$\PP(D)$, which enables us to define acyclic ornamentations of~$D$.

\begin{lemma}
\label{lem:ASour2AOrn1}
The map~$S \mapsto \orn{S}$ is injective on acyclic sourcings.
\end{lemma}

\begin{proof}
Let~$S_1 \ne S_2$ be two distinct acyclic sourcings of~$\PP(D)$.
There exists~$P \in \PP(D)$ such that~$u \eqdef S_1(P) \ne S_2(P) \defeq v$.
We can assume by symmetry that~$u < v$.
Then~$u \notin \orn{S_1}(v)$ (by acyclicity of~$S_1$) while~$u \in \orn{S_2}(v)$ (by definition of~$\orn{S_2}$).
Hence~$\orn{S_1} \ne \orn{S_2}$.
\end{proof}

\begin{lemma}
\label{lem:acyclicSimplifiesDef}
For any acyclic reorientation~$R$ of~$\tc(D)$ (resp.~acyclic sourcing~$S$ of~$\PP(D)$) and any~$u,v \in V$ such that~$u$ is in~$\orn{R}(v)$ (resp.~$u \in \orn{S}(v)$) the pair~$(u,v)$ is in~$\rev(R)$ (resp.~in~$\rev(S)$).
\end{lemma}

\begin{proof}
Since~$R$ (resp.~$S$) is acyclic, $\rev(R)$ (resp.~$\rev(S)$) is transitive.
The statement thus follows directly from the definition of~$\orn{R}(v)$ (resp.~$u \in \orn{S}(v)$).
\end{proof}

\begin{lemma}
\label{lem:AReori2ASour2AOrn}
For any acyclic reorientation~$R$ of~$\tc(D)$, we have~$\orn{R} = \orn{\asour{R}}$.
\end{lemma}

\begin{proof}
Since~$R$ is acyclic, we have~$\rev(\asour{R}) \subseteq \rev(R)$ by \cref{lem:AReori2ASour1}, hence~$\orn{\asour{R}}(v) \subseteq \orn{R}(v)$ for any~$v \in V$.
Conversely, consider~$u,v \in V$ such that~$u \in \orn{R}(v)$.
Let~$P$ be a path from~$u$ to~$v$ in~$\orn{R}(v)$.
By \cref{lem:acyclicSimplifiesDef}, we have~$(w,v) \in \rev(R)$ for all~$w \in P$.
Therefore, $v$ is the source of~$P$ in~$R$, that is, $v = \asour{R}(P)$.
We thus obtain that~$(u,v) \in \rev(\asour{R})$.
We conclude that~$\orn{R}(v) \subseteq \rev(\asour{R})$, hence that~$\orn{R}(v) \subseteq \orn{\asour{R}}(v)$ by maximality of~$\orn{\asour{R}}(v)$.
\end{proof}

\begin{lemma}
\label{lem:AOrn2}
The following conditions are equivalent for an ornamentation~$O$ of~$D$:
\begin{enumerate}[(i)]
\item there exists an acyclic reorientation~$R$ of~$\tc(D)$ such that~$\orn{R} = O$,
\item there exists an acyclic sourcing~$S$ of~$\PP(D)$ such that~$\orn{S} = O$.
\end{enumerate}
\end{lemma}

\begin{proof}
(i) $\Rightarrow$ (ii): If~$R$ is an acyclic reorientation of~$\tc(D)$ such that~$\orn{R} = O$, then~$S \eqdef \asour{R}$ is an acyclic sourcing of~$\PP(D)$ such that~$\orn{S} = \orn{\asour{R}} = \orn{R} = O$ by \cref{lem:AReori2ASour2AOrn}.

\medskip\noindent
(ii) $\Rightarrow$ (i): If~$S$ is an acyclic sourcing of~$\PP(D)$ such that~$\orn{S} = O$, then~$R \eqdef \areori{S}$ is an acyclic reorientation of~$\tc(D)$ such that~$\orn{R} = \orn{\areori{S}} = \orn{\asour{\areori{S}}} = \orn{S} = O$ by \cref{lem:ASour2AReori2,lem:AReori2ASour2AOrn}.
\end{proof}

\begin{remark}
\label{rem:Orn2Sour&Orn2ReoriIncompatibleAcyclicity}
Careful, the conditions of \cref{lem:AOrn2} are not equivalent to $\reori{O}$ and/or~$\sour{O}$ being acyclic.
For instance, consider the two ornamentations
\[
O_1 = \! \includegraphics[scale=.8,valign=c]{acyclicOrnamentationR}
\qquad\text{and}\qquad
O_2 = \! \includegraphics[scale=.8,valign=c]{acyclicOrnamentationD}
.
\]
Note that~$O_1 = \orn{\reori{34251}}$ and~$O_2 = \orn{\reori{3412}}$ so that they both fulfill the conditions of \cref{lem:AOrn2}.
However,
\begin{itemize}
\item the reorientation~$\reori{O_1}$ is cyclic since it contains the cycle~$1 \to 4 \to 3 \to 5 \to 1$,
\item the sourcing~$\sour{O_2}$ is cyclic since~$\sour{O_2}(\{3,4\}) = 3$ and~$\sour{O_2}(\{1,3,4\}) = 4$.
\end{itemize}
\end{remark}

\begin{definition}
\label{def:AOrn}
An ornamentation~$O$ of~$D$ is \defn{acyclic} if the equivalent conditions of \cref{lem:AOrn2} are satisfied.
The \defn{acyclic ornamentation poset}~$\AOrn(D)$ is the subposet of the ornamentation lattice~$\Orn(D)$ induced by acyclic ornamentations.
\end{definition}

\begin{remark}
\label{rem:COrn}
We will see in \cref{subsec:rootedTrees} that all the ornamentations of an unstarred tree are acyclic.
This is false in general, even for directed trees.
For instance, the cyclic ornamentations of the directed graphs of \cref{fig:ornamentationsX,fig:ornamentationsD,fig:ornamentationsKT} are
\[
\includegraphics[scale=.8,valign=c]{cyclicOrnamentationX1}\;\;
\includegraphics[scale=.8,valign=c]{cyclicOrnamentationX2}\;\;
\includegraphics[scale=.8,valign=c]{cyclicOrnamentationD1}
\includegraphics[scale=.8,valign=c]{cyclicOrnamentationD2}\;\;
\includegraphics[scale=.8,valign=c]{cyclicOrnamentationD3}
\includegraphics[scale=.8,valign=c]{cyclicOrnamentationD4}\;\;
\includegraphics[scale=.8,valign=c]{cyclicOrnamentationK}\;\;
\includegraphics[scale=.8,valign=c]{cyclicOrnamentationT1}\;\;
\includegraphics[scale=.8,valign=c]{cyclicOrnamentationT2}
\]
since their fibers under~$R \mapsto \orn{R}$ are all singletons, containing the cyclic reorientations
\[
\includegraphics[scale=.8,valign=c]{cyclicReorientationX1}\;\;
\includegraphics[scale=.8,valign=c]{cyclicReorientationX2}\;\;
\includegraphics[scale=.8,valign=c]{cyclicReorientationD1}\;
\includegraphics[scale=.8,valign=c]{cyclicReorientationD2}\;
\includegraphics[scale=.8,valign=c]{cyclicReorientationD3}\;
\includegraphics[scale=.8,valign=c]{cyclicReorientationD4}\;
\includegraphics[scale=.8,valign=c]{cyclicReorientationK}\;\;
\includegraphics[scale=.8,valign=c]{cyclicReorientationT1}\;\;
\includegraphics[scale=.8,valign=c]{cyclicReorientationT2}
\]
\end{remark}

\begin{remark}
\label{rem:AOrnLat}
We will see in \cref{subsec:rootedTrees} that the acyclic ornamentation poset of an unstarred tree  is a lattice.
This is false in general, even for directed trees.
For instance, the acyclic ornamentation posets of the directed graphs~$\Xgraph$ of \cref{fig:ornamentationsX}, $\Dgraph$ of \cref{fig:ornamentationsD}, and $\Tgraph$ of \cref{fig:ornamentationsKT} are not lattices.
In contrast, the acyclic ornamentation poset of the directed graph~$\Kgraph$ of \cref{fig:ornamentationsKT} is a lattice.
We do not have a characterization of the directed graphs whose acyclic ornamentation poset is a lattice.
\end{remark}

To keep our notations coherent, we denote by~$\aorn{R} \eqdef \orn{R}$ the acyclic ornamentation of~$D$ corresponding to an acyclic reorientation~$R$ of~$\tc(D)$, and by~$\aorn{S} \eqdef \orn{S}$ the acyclic ornamentation of~$D$ corresponding to an acyclic sourcing~$S$ of~$\PP(D)$.
Conversely, for an acyclic ornamentation~$O$ of~$D$, we denote by~$\asour{O}$ the corresponding acyclic sourcing of~$\PP(D)$ (\cref{lem:ASour2AOrn1}), and we define an acyclic reorientation of~$\tc(D)$ by~$\areori{O} \eqdef \areori{\asour{O}}$.
Be careful that~$\asour{O} \ne \sour{O}$ and~$\areori{O} \ne \reori{O}$ in general (as~$\sour{O}$ and~$\reori{O}$ might not be acyclic even if~$O$ is acyclic, see \cref{rem:Orn2Sour&Orn2ReoriIncompatibleAcyclicity}).

\begin{proposition}
\label{prop:ASour2AOrn}
The map~$S \mapsto \aorn{S}$ is a poset isomorphism from the acyclic sourcing poset~$\ASour(\PP(D))$ to the acyclic ornamentation poset~$\AOrn(D)$.
\end{proposition}

\begin{proof}
By \cref{lem:ASour2AOrn1}, the map~$S \mapsto \aorn{S}$ is injective on acyclic sourcings.

We have seen in \cref{lem:Orn2Sour2} that the map~$S \mapsto \orn{S}$ is surjective on all ornamentations.
By definition of acyclic ornamentations, the map~$S \mapsto \aorn{S}$ is surjective on acyclic ornamentations.

Finally, we have seen that~$S \mapsto \orn{S}$ and~$O \mapsto \sour{O}$ are order-preserving in \cref{lem:Sour2Orn3,lem:Orn2Sour1}.
We conclude that~$S \mapsto \aorn{S}$ and~$O \mapsto \asour{O}$ are inverse isomorphisms from the acyclic sourcing poset~$\ASour(\PP(D))$ to the acyclic ornamentation poset~$\AOrn(D)$.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Trees}
\label{sec:trees}

In this section, we focus on the specific situation when the ground directed graph~$D$ is a directed tree~$T$ (but not necessarily a rooted tree), as for example in \cref{fig:ornamentationsNI,fig:ornamentationsAY,fig:ornamentationsX}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Basic observations}

We start by a few observations.

\begin{lemma}
\label{lem:meetOrnT}
If~$T$ is a directed tree, and~$U,U' \in \Orn(v \in T)$, then~$U \cap U' \in \Orn(v \in T)$.
\end{lemma}

\begin{proof}
In a directed tree, the ornaments are precisely the directed paths, and the intersection of two directed paths is a directed path.
\end{proof}

\begin{corollary}
\label{coro:meetOrnT}
The meet of two ornamentations~$O_1$ and~$O_2$ of a directed tree~$T$ is given by
\[
(O_1 \meet O_2)(v) = O_1(v) \cap O_2(v).
\]
\end{corollary}

\begin{lemma}
\label{lem:Reori2OrnT}
For a directed tree~$T$ and an acyclic reorientation~$R$ of~$\tc(T)$, we have~$u \in \orn{R}(v)$ if and only if~$(u',v) \in \rev(R)$ for all~$u'$ along the path from~$u$ to~$v$ in~$T$.
\end{lemma}

\begin{proof}
Since~$T$ is a directed tree, its ornaments are directed paths.
Since~$R$ is acyclic, there is a directed path from~$u$ to~$v$ in~$\rev(R)$ if and only if~$(u,v) \in \rev(R)$.
By \cref{def:Reori2Orn}, $\orn{R}(v)$ is the maximal ornament of~$T$ at~$v$ contained in the subset of vertices~$u \in V$ with a directed path to~$v$ in $\rev(R)$.
Hence, $u \in \orn{R}(v)$ if and only if~$u' \in \rev(R)$ for all~$u'$ along the path from~$u$ to~$v$ in~$T$.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Maximal reorientation}

We now revisit \cref{rem:Reori2OrnIntervals1,rem:Reori2OrnIntervals2} for directed trees.

\begin{definition}
\label{def:Reori2OrnMaxT}
Consider an ornamentation~$O$ of a directed tree~$T$.
Let~$\maxreori{O}$ denote the reorientation of~$\tc(T)$ where for each path~$u \to u' \to \dots \to v$ in~$T$ (note that $u'$ might coincide with~$v$), the edge~$(u,v)$ is in~$\rev(\maxreori{O})$ if and only if there is no~$w \in V$ such that~$u \notin O(w)$ while~$u', v \in O(w)$.
\end{definition}

\begin{proposition}
\label{prop:Reori2OrnMaxTree}
For any ornamentation~$O$ of a directed tree~$T$, the reorientation~$\maxreori{O}$ is the maximum reorientation~$R$ of~$\tc(T)$ with~$\orn{R} = O$.
\end{proposition}

\begin{proof}
We first prove that~$\orn{\maxreori{O}} = O$.
Fix~$u,v \in V$.
Observe first that~$u \in O(v)$ implies~$(u,v) \in \rev(\maxreori{O})$ since~$v \in O(w)$ implies~$u \in O(v) \subseteq O(w)$ for any~$w \in V$, so that~$u \in  \orn{\maxreori{O}}(v)$ by definition.
Conversely, assume that~$u \notin O(v)$ and consider such an~$u$ which is closest to~$v$.
Consider the path~$u \to u' \to \dots \to v$ in~$T$.
For any~$v'$ between~$u'$ and~$v$, we have~$u \notin O(v)$ while~$u', v' \in O(v)$, which implies that~$(u,v') \notin \rev(\maxreori{O})$.
Hence, there is no path from~$u$ to~$v$ in~$\rev(\maxreori{O})$, and thus~$u \notin \orn{\maxreori{O}}(v)$.
We conclude that~$u \in O(v) \iff u \in \orn{\maxreori{O}}(v)$, that is~$O = \orn{\maxreori{O}}$.

Consider now any reorientation~$R$ of~$\tc(T)$ such that~$\orn{R} = O$.
Assume that there is~$u,v \in V$ such that~$(u,v) \in \rev(R) \ssm \rev(\maxreori{O})$.
Consider the path~$u \to u' \to \dots \to v$ in~$T$, and let~$w \in V$ be such that~$u \notin O(w)$ while~$u', v \in O(w)$.
Since~$\orn{R} = O$ and~$v \in O(w)$, there is a path from~$v$ to~$w$ in~$\rev(R)$, hence from~$u$ to~$v$ in~$\rev(R)$ since~$(u,v) \in \rev(R)$.
Moreover, since~$(u,u') \in T$ and~$u' \in O(w)$, the set~$O(w) \cup \{u\}$ is an ornament of~$T$ at~$w$.
Hence, $O(w) \cup \{u\}$ contradicts the maximality of~$\orn{R}(w)$.
We conclude that if~$\orn{R} = O$, then~$\rev(R) \subseteq \rev(\maxreori{O})$, hence~$R \le \maxreori{O}$.
\end{proof}

\begin{proposition}
\label{prop:ReoriTC2OrnIntervalT}
For any ornamentation~$O$ of a directed tree~$T$, the reorientation~$\maxreori{O}$  of~\cref{def:Reori2OrnMaxT} is transitively closed.
Hence, the transitively closed reorientations~$R$ of~$\tc(T)$ with~${\orn{R} = O}$ form an interval of the transitively closed reorientation lattice~$\Rcl(\tc(T))$.
\end{proposition}

\begin{proof}
Assume that there is a directed path~$u \to u' \to \dots \to v$ in~$T$ such that~$(u,v) \notin \rev(\maxreori{O})$.
Let~$w \in V$ be such that $u \notin O(w)$ but~$u',v' \in O(w)$.
Then, for any~$v'$ between~$u'$ and~$v$, we have~$v' \in O(w)$, hence~$(u,v') \not \in \rev(\maxreori{O})$.
We thus obtained that~$(u,v'), (v',v) \in \rev(\maxreori{O})$ implies~$(u,v) \in \rev(\maxreori{O})$, that is, $\rev(\maxreori{O})$ is transitively closed.
\vincent{not only it has a max, but it has a Tamari max....}
We conclude that the fiber of~$O$ is an interval, since it has a minimum by \cref{prop:Reori2OrnMinTC} and a maximum by \cref{prop:Reori2OrnMaxTree}.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Coclosedness and induced cycles}

We now revisit \cref{rem:notTransitivelyCoclosed} for directed trees.

\begin{lemma}
\label{lem:Orn2ReoriT}
For an ornamentation~$O$ of a directed tree~$T$, the reorientation~$\reori{O}$ is transitively closed and coclosed.
Hence, any induced oriented cycle in~$\reori{O}$ is an induced alternating cycle in~$\tc(T)$ (meaning taking alternatively forward and backward arrows).
\end{lemma}

\begin{proof}
We have already seen in \cref{prop:ReoriTC2Orn} that~$\reori{O}$ is transitively closed.
Let~$u, v, w \in V$ be such that~$(u,v)$ and~$(v,w)$ are in~$\tc(T)$,
%Assume that~${(u,v), (v,w) \in \rev(\reori{O})}$.
%Then~$u \in O(v)$ and~$v \in O(w)$, hence~$u \in O(w)$ since~$O$ is an ornamentation, thus ${(u,w) \in \rev(\reori{O})}$.
and that~$(u,w) \in \rev(\reori{O})$. Then~$u \in O(w)$. As~$T$ is a tree, the complete path from~$u$ to~$w$ is in~$O(w)$, hence~$v \in O(w)$ and thus $(v,w) \in \rev(\reori{O})$.
We conclude that~$\reori{O}$ is transitively coclosed.
The last statement immediately follows as an induced cycle cannot chain two consecutive forward arrows, nor two consecutive backwards arrows.
\end{proof}

We say that $a,b,d,e \in V$ are \defn{starred} in~$T$ if there is $c \in V$ such that~$(a,c)$, $(b,c)$, $(c,d)$ and~$(c,e)$ are all in~$\tc(T)$.

\begin{lemma}
\label{lem:starred}
For a directed tree~$T$, any induced alternating cycle in~$\tc(T)$ is of the form~$(a,d,b,e)$ where~$a,d,b,e$ are starred in~$T$.
\end{lemma}

\begin{proof}
Let~$C$ be an induced alternating cycle in~$\tc(T)$.
We can write~$C = (d_1, u_1, d_2, u_2, \dots, d_k, u_k)$ where~$(d_i, u_i)$ and~$(u_i, d_{i+1})$ are in~$\tc(T)$ for all~$i \in [k]$.

Assume first that~$(d_1,u_k)$ is an edge of~$T$.
Let~$D$ and~$U$ denote the connected components of~$T \ssm \{(d_1,u_k)\}$ containing~$d_1$ and~$u_k$ respectively.
Let~$i \in [k]$ be maximal such that~$d_i \in D$.
Since~$d_{i+1} \in U$ and~$d_{i+1} \to u_i$ in~$\tc(T)$, we have~$u_i \in U$.
Hence, the edge~$(d_1,u_k)$ is an edge of the path from~$d_i$ to~$u_i$ in~$T$.
We conclude that~$C$ was not induced.

Therefore, there is~$w \in V$ such that~$(d_1,w)$ and~$(w,u_k)$ are in~$\tc(T)$.
Since~$C$ is induced, we obtain again an induced alternating cycle by replacing either~$d_1$ or~$u_k$ by~$x$ in~$C$, say~$u_k$ by symmetry.
By induction on the sum of the length of the paths between~$d_i$ and~$u_i$ in~$T$, we obtain that~$k = 2$ there is~$v \in V$ such that~$(d_1, v)$, $(d_2,v)$, $(v,u_1)$, and~$(v,w)$ are in~$\tc(T)$, and as~$w$ is between~$d_1$ and~$u_2$, we also get~$(v,u_2) \in \tc(T)$.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{MacNeille completion}

We now come back to the general case of directed trees.
As already observed on the directed tree~$\Xgraph$ of \cref{fig:ornamentationsX},
\begin{itemize}
\item there might be some cyclic ornamentations (\cref{rem:COrn}),
\item the acyclic ornamentation poset is not always a lattice (\cref{rem:AOrnLat}).
\end{itemize}
However, we now observe that for a directed tree~$T$, the ornamentation lattice~$\Orn(T)$ is precisely the MacNeille completion of the acyclic ornamentation lattice~$\AOrn(T)$.

\begin{theorem}
\label{thm:MacNeille}
The ornamentation lattice~$\Orn(T)$ of a directed tree~$T$ has no strict subposet which forms a lattice and contains all acyclic ornamentations of~$T$.
%In other words, the ornamentation lattice~$\Orn(T)$ is the MacNeille completion of the acyclic ornamentation lattice~$\AOrn(T)$.
\end{theorem}

\begin{proof}%[Proof of \cref{thm:MacNeille}]
Consider a subposet~$L$ of~$\Orn(T)$ which forms a lattice, and containing all acyclic ornamentations of~$T$.
We prove that all ornamentations~$O$ of~$T$ must be contained in~$L$ by induction on the number of induced cycles in~$\reori{O}$.

If~$\reori{O}$ has no induced cycle, it is acyclic, hence~$O$ is acyclic and thus belongs to~$L$ by assumption.
Assume now that all ornamentations~$O$ such that~$\reori{O}$ has at most~$k$ induced cycles belong to~$L$, and consider an ornamentation~$O'$ such that~$\reori{O'}$ has~$k+1$ induced cycles.
By \cref{lem:Orn2ReoriT}, $C$ is an induced altermating cycle in~$\tc(T)$.
By \cref{lem:starred}, $C$ is of the form~$(a,d,b,e)$ where~$a,b,d,e$ are starred in~$T$.
\vincent{todo: I have a problem in the induction here. The number of induced cycles does not always decrease...}
\end{proof}

\begin{remark}
\label{rem:MacNeille}
Note that~\cref{thm:MacNeille} fails beyond directed trees.
For instance,
\begin{itemize}
\item for the directed graph~$\Kgraph$ of \cref{fig:ornamentationsKT}, the acyclic ornamentations already form lattice, even if there is a cyclic ornamentation,
\item for the directed graph~$\Dgraph$ of  \cref{fig:ornamentationsD}, the acyclic ornamentation poset is not a lattice, but adding the two cyclic ornamentations
\[
\includegraphics[scale=.8,valign=c]{cyclicOrnamentationD3}
\quad\text{and}\quad
\includegraphics[scale=.8,valign=c]{cyclicOrnamentationD4}
\]
suffices to make it a lattice.
\end{itemize}
In contrast, \cref{thm:MacNeille} still holds for the directed graph~$\Tgraph$ of \cref{fig:ornamentationsKT}.
In general, we have no description of the MacNeille completion of the acyclic ornamentation lattice of an arbitrary directed graph.
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Unstarred trees and rooted trees}
\label{subsec:rootedTrees}

In this section, we discuss the specific situation when the ground directed graph~$D$ is an unstarred tree~$T$, defined as follows.

\begin{lemma}
\label{lem:starredFreeTrees}
The following conditions are equivalent for a directed tree~$T$ on~$V$:
\begin{enumerate}[(i)]
\item $\tc(T)$ contains an induced alternating cycle.
\item there are $a,b,c,d,e \in V$ such that~$(a,c)$, $(b,c)$, $(c,d)$, and~$(c,e)$ are all in~$\tc(T)$,
\item there are~$u,v \in V$ such that~$u$ has at least two incoming edges in~$T$, $v$ has at least two outgoing edges in~$T$, and $T$ has a directed path from~$u$ to~$v$,
\end{enumerate}
\end{lemma}

\begin{proof}
(i) $\Rightarrow$ (ii). This is \cref{lem:starred}.

(ii) $\Rightarrow$ (i). Let~$a,b,c,d,e$ as in~(ii). Then~$(a,d,b,e)$ forms an induced alternating cycle in~$\tc(T)$.

(ii) $\Rightarrow$ (iii). Let~$a,b,c,d,e$ as in~(ii). Let $u$ (resp.~$v$) be the first common vertex of the paths from~$a$ and~$b$ to~$c$ (from~$c$ to~$d$ and~$e$). Then~$u$ (resp.~$v$) has at least two incoming (resp.~outgoing) arrows, and there is a path from~$u$ to~$v$ passing through~$c$.

(iii) $\Rightarrow$ (ii). Let~$u,v$ as in~(iii). Let~$a,b$ be two incoming neighbors of~$u$, let~$d,e$ be two outgoinng neighbors of~$v$, and let~$c$ be any vertex along the path from~$u$ to~$v$. Then~$a,b,c,d,e$ are as in~(ii).
\end{proof}

\begin{definition}
\label{def:starredTree}
We say that a directed free~$T$ is \defn{starred} if it satisfies the equivalent conditions of \cref{lem:starredFreeTrees} and \defn{unstarred} otherwise.
Note that rooted trees (with increasing edges all oriented toward the root) are unstarred.
\end{definition}

For instance, the tree of \cref{fig:ornamentationsX} is starred (it is the smallest starred tree), while that of \cref{fig:ornamentationsNI,fig:ornamentationsAY} are all unstarred.

\begin{proposition}
\label{prop:rootedTrees1}
For any ornamentation~$O$ of an unstared tree~$T$, the reorientation~$\reori{O}$ of~$\tc(T)$ and the sourcing~$\sour{O}$ of~$\PP(T)$ are both acyclic.
In particular, all ornamentations of~$T$ are acyclic and~$\ASour(\PP(T)) \simeq \AOrn(T) = \Orn(T)$.
\end{proposition}

\begin{proof}
If~$\reori{O}$ is cyclic, it contains an induced oriented cycle (any chord can be used to make the cycle shorter).
An induced oriented cycle in~$\reori{O}$ is an induced alternating cycle in~$\tc(T)$ by~\cref{lem:Orn2ReoriT}.
This would imply that~$T$ is starred by \cref{def:starredTree}.
The proof for the acyclicity of~$\sour{O}$ is similar.
%Assume that~$\reori{O}$ contains an oriented cycle~$C$, and assume that~$C$ is minimal.
%Let~$u$ be the vertex of~$C$ closest to the root of~$T$.
%Let~$v$ be the last vertex along~$C$ such that the path from~$u$ to~$v$ in~$C$ moves away from~$u$ at each step.
%Finally, let~$w$ be the vertex just after~$v$ along~$C$.
%Since~$(v,w) \in \tc(T)$, the vertex~$w$ is along the path from~$v$ to the root of~$T$, hence between~$u$ and~$v$.
%Since the edges of~$C$ between~$u$ and~$v$ are in~$\rev(\reori{O})$, we obtain that~$v \in O(u)$, hence~$w \in O(u)$ since~$w$ lies along the path from~$u$ to~$v$ in~$T$.
%We conclude that~$(u,w) \in \rev(\reori{O})$, contradicting the minimality of the cycle~$C$.
%The proof for the acyclicity of~$\sour{O}$ is similar.
%
%For Part (1),
%the transitive reduction $D$ of any induced subgraph of $\tc(T)$ is a (rooted) forest.
%Indeed, any such $D$ is clearly acyclic and all the out-degrees of its vertices are at most one.
%Otherwise, if $(u,v)$ and $(u,v')$ are edges in $D$, then both $v,v'$ are vertices in the unique path from $u$ to the root of $T$, and thus form an edge of $D$, contradicting that $D$ is transitively reduced.
%It follows from \cref{prop:AReoriLat} that $\AReori(\tc(T))$ is a lattice.
%The other two claims in Part (1) follow from Part (2).
\end{proof}

\begin{proposition}
\label{prop:rootedTrees2}
For an unstarred tree~$T$, the acyclic reorientation poset~$\AReori(\tc(T))$, the acyclic sourcing poset~$\ASour(\PP(T))$, and the acyclic ornamentation poset~$\AOrn(T)$ are all lattices.
\end{proposition}

\begin{proof}
%Given any subset~$X$ of vertices of~$T$, denote by~$T[X]$ the forest on~$X$ where the parent of~$x \in X$ is the vertex of~$X$ closest to~$x$ along the path from the root of~$T$ to~$x$.
%Then the subgraph of~$\tc(T)$ induced by~$X$ is the transitive closure of~$T[X]$, so that its transitive reduction is a forest.
Given any subset~$U \subset V$, the subgraph of~$\tc(T)$ induced by~$U$ contains no induced alternating cycle, hence no induced cycles of length at least~$4$.
Hence, its transitive reduction contains no cycle.
We conclude by~\cref{prop:AReoriLatJoinMeet} that~$\AReori(\tc(T))$ is a lattice.
Finally, \cref{prop:rootedTrees1} ensures that~$\ASour(\PP(T))$ and~$\AOrn(T)$ are both isomorphic to~$\Orn(T)$, which is a lattice by~\cref{thm:OrnMeetJoin}.
\end{proof}

\begin{proposition}
\label{prop:rootedTrees3}
For an unstarred tree~$T$, the map $R \mapsto \aorn{R}$ is a surjective lattice map, hence the lattices~$\ASour(\PP(T)) \simeq \AOrn(T) = \Orn(T)$ are lattice quotients~of~$\AReori(\tc(T))$.
\end{proposition}

\begin{proof}
The map is surjective by \cref{def:AOrn}.
Consider two acyclic reorientations~$R_1$ and~$R_2$ of $\tc(T)$.
We need to show that ${\orn{R_1 \meet R_2} = \orn{R_1} \meet \orn{R_2}}$ and~$\orn{R_1 \join R_2} = \orn{R_1} \join \orn{R_2}$.
Since~$R \mapsto \orn{R}$ is order-preserving (\cref{lem:Reori2Orn2}) and~$R_1 \meet R_2 \le R_1 \le R_1 \join R_2$ and~$R_1 \meet R_2 \le R_2 \le R_1 \join R_2$, we have~$\orn{R_1 \meet R_2} \le \orn{R_1} \le \orn{R_1 \join R_2}$ and~$\orn{R_1 \meet R_2} \le \orn{R_2} \le \orn{R_1 \join R_2}$, hence~${\orn{R_1 \meet R_2} \le \orn{R_1} \meet \orn{R_2}}$ and~${\orn{R_1} \join \orn{R_2} \le \orn{R_1 \join R_2}}$.
To prove the converse inequalities, remember the descriptions of~${O_1 \meet O_2}$ and~${O_1 \join O_2}$ from \cref{thm:OrnMeetJoin}, and of~$\rev(R_1 \meet R_2)$ and~$\rev(R_1 \join R_2)$ from~\cref{prop:AReoriLatJoinMeet}.

If~$u \notin \orn{R_1 \meet R_2}(v)$, then there is $u'$ along the path from~$u$ to~$v$ such that~$(u',v) \notin \rev(R_1 \meet R_2)$ by \cref{lem:Reori2OrnT}.
Therefore, there is a path~$u' = w_0, \dots, w_k = v$ such that~$(w_{i-1}, w_i) \notin \rev(R_1) \cap \rev(R_2)$ by~\cref{prop:AReoriLatJoinMeet}.
As~$w_{k-1}$ is on the path from~$u$ to~$v$ and~$(w_{k-1},v) \notin \rev(R_1) \cap \rev(R_2)$, we conclude by \cref{lem:Reori2OrnT} that~$u \notin \orn{R_1}(v)$ or~$u \notin \orn{R_2}(v)$, hence~$u \notin \orn{R_1}(v) \cap \orn{R_2}(v) = (\orn{R_1} \meet \orn{R_2})(v)$ (by \cref{coro:meetOrnT}, since~$T$ is a directed tree).
We conclude that~$(\orn{R_1} \meet \orn{R_2}) \le \orn{R_1 \meet R_2}$, hence that~$\orn{R_1 \meet R_2} = \orn{R_1} \meet \orn{R_2}$.

Consider now~$u \in \orn{R_1 \join R_2}(v)$.
Let~$u = w_0, \dots, w_k = v$ denote the path from~$u$ to~$v$.
By \cref{lem:Reori2OrnT}, $(w_i, v) \in \rev(R_1 \join R_2)$ for all~$i \in [k]$.
Assume that~$w_{i+1}, \dots, w_k \in (\orn{R_1} \join \orn{R_2})(v)$ for some~$i \in [k-1]$.
Since~$(w_i, v) \in \rev(R_1 \join R_2) = \tc(T) \cap \tc(\rev(R_1) \cup \rev(R_2))$, there is~${i+1 \le \ell \le k}$ such that~$(w_i, w_\ell) \in \rev(R_1) \cup \rev(R_2)$.
Assume that~$\ell$ is minimal for this property, and assume by symmetry that~$(w_i, w_\ell) \in \rev(R_1)$.
Since~$R_1$ is acyclic, we have~$(w_j, w_\ell) \in \rev(R_1)$ for all~${i \le j \le \ell}$.
By \cref{lem:Reori2OrnT}, we obtain that~$w_i \in \orn{R_1}(w_\ell)$.
By \cref{thm:OrnMeetJoin}, we therefore obtain that~${w_i \in (\orn{R_1} \join \orn{R_2})(v)}$.
Hence, by descending induction, we obtain that~$u \in (\orn{R_1} \join \orn{R_2})(v)$.
We conclude that~$\orn{R_1 \join R_2} \le \orn{R_1} \join \orn{R_2}$, hence that~${\orn{R_1 \join R_2} = \orn{R_1} \join \orn{R_2}}$.
\end{proof}

\begin{corollary}
If~$T$ is an unstarred tree, then the Hasse diagram of the ornamentation lattice~$\Orn(T)$ is isomorphic to the graph of the path hypergraphic polytope~$\simplex_{\PP(D)} \eqdef \sum_{u \le_T v} \simplex_{[u,v]_T}$ oriented in the direction~$\omega$.
\end{corollary}

\vincent{This is not completely proved here since I have not proved that the graph is transitively reduced...}

\begin{remark}
Lattice quotients of acyclic reorientation lattices were studied in detail in~\cite{Pilaud-acyclicReorientationLattices}.
We can reformulate \cref{prop:rootedTrees1,prop:rootedTrees2,prop:rootedTrees3} using the language of~\cite{Pilaud-acyclicReorientationLattices}: if~$T$ is an unstarred tree, then
\begin{enumerate}
\item the transitive closure~$\tc(T)$ is skeletal, so that~$\AReori(\tc(T))$ is an acyclic reorientation lattice,
\item the ornamentation lattice~$\AReori(\tc(T))$ is (isomorphic to) the Tamari lattice of~$\tc(T)$ defined by the $\tc(T)$-sylvester congruence,
\item the path hypergraphic polytope~$\simplex_{\PP(T)}$ is the $\tc(T)$-associahedron.
\end{enumerate}
\end{remark}

\begin{remark}
It might seem more natural to use the map~$\fS_n \to \ASour(\PP(T))$ defined by~$\pi \mapsto \asour{\areori{\pi}}$ instead of the map~$\AReori(\tc(T)) \to \ASour(\PP(T))$ defined by~$R \mapsto \asour{R}$.
However, the former is not always a lattice map, while the latter is.
For instance, the fiber of the ornamentation
...
is the set of permutations~$\{\}$ which is not even an interval of the weak order.
\vincent{todo}
\end{remark}

\begin{example}
Complete binary tree?
\vincent{Is there something interesting to say. Number of ornamentations?}
\end{example}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Brooms}

We conclude our section on trees by a discussion on the number of ornamentations of a broom.

\begin{definition}
The \defn{$(m,n)$-broom} is the rooted tree obtained by attaching $m$ nodes (called \defn{bristles}) to an $n$-path (called \defn{handle}).
\end{definition}

\begin{remark}
The $(m,n)$-broom has~$2^{m+n-1}$ reorientations, of which $(n+1)^m \, n!$ are acyclic, and~$\prod_{k = 1}^{n+1} k^{m+n+1-k}$ sourcings.
As the $(m,n)$-broom is a rooted tree, all its ornamentations are acyclic by \cref{prop:rootedTrees1}, so its numbers of acyclic sourcings, acyclic ornamentations and ornamentations are all equal.
\end{remark}

We denote by~$B_{m,n}$ the number of (acyclic) ornamentations of the $(m,n)$-broom, by
\[
B(x,y) \eqdef \sum_{m \ge 0, n \ge 0} B_{m,n} \, x^m/m! \, y^n
\]
their generating function (exponential in~$x$ and ordinary in~$y$), and by
\[
B_m(y) \eqdef m! \, [x^m] \, B(x,y) = \sum_{n \ge 0} B_{m,n} \, y^n
\]
the coefficient of~$x^m/m!$ in~$B(x,y)$.
As~$B_{0,m} = B_{1,n-1}$ is the $n$th Catalan number~$C_n \eqdef \frac{1}{n+1}\binom{2n}{n}$, we have $B_0(y) = C(y)$ and~$B_1(y) = (C(y) - 1)/y$ where~$C(y) \eqdef \sum_{n \ge 0} C_n \, y^n = \frac{1-\sqrt{1-4y}}{2y}$.

\begin{proposition}
\label{prop:brooms1}
The numbers~$B_{m,n}$ satisfy the following recurrence relation:
\[
B_{m,n} = \sum_{k = 0}^m \sum_{\ell = 1}^n \binom{m}{k} \, C_{n-\ell} \, B_{k,\ell-1}
\]
where~$\displaystyle C_n \eqdef \frac{1}{n+1}\binom{2n}{n}$ is the $n$th Catalan number.
\end{proposition}

\begin{proof}
Consider an ornament~$U$ of the $(m,n)$-broom containing~$k \ge 1$ bristles and $\ell \ge 1$ vertices of the handle.
The ornamentations~$O$ of the $(m,n)$-broom containing~$U$ are clearly in bijection with pairs formed by an ornamentation of the $(k, \ell-1)$-broom and an ornamentation of the $(n-\ell)$-path.
Conversely, we can associate to each ornamentation of the $(m,n)$-broom the inclusion maximal ornament~$U$ of~$O$ containing at least one bristle (note that there might be no such ornament).
The formula immediately follows.
\end{proof}

\begin{proposition}
\label{prop:brooms2}
The generating function~$B(x,y) \eqdef m! \, [x^m] \, B(x,y) = \sum_{n \ge 0} B_{m,n} \, y^n$ is given~by
\[
B(x,y) = \frac{e^x}{1-e^x \, y \, C(y)}
\]
where~$C(y) \eqdef \sum_{n \ge 0} C_n \, y^n = \frac{1-\sqrt{1-4y}}{2y}$.
\end{proposition}

We give two proofs of \cref{prop:brooms2}: the first is a direct translation of the decomposition of ornamentations of brooms discussed in the proof of \cref{prop:brooms1}, the second is a more pedestrian proof based on the expression of \cref{prop:brooms1}.

\begin{proof}[First proof of \cref{prop:brooms2}]
The decomposition of ornamentations of brooms discussed in the proof of \cref{prop:brooms1} tells that ornamentations of brooms can be thought of as sequences of pairs, each formed by a subset of bristles and an ornamentation of a path.
Using classical generatingfunctionology~\cite{FlajoletSedgewick}, this immediately yields the expression of the statement.
\end{proof}

\begin{proof}[Second proof of \cref{prop:brooms2}]
Recall that if
\[
U(x,y) = \sum_{m \ge 0, n \ge 0} U_{m,n} \, x^m/m! \, y^n
\qquad\text{and}\qquad
V(x,y) = \sum_{m \ge 0, n \ge 0} V_{m,n} \, x^m/m! \, y^n
\]
are two generating functions exponential in~$x$ and ordinary in~$y$, then
\[
U(x,y) \cdot V(x,y) = \sum_{m \ge 0, n \ge 0} W_{m,n}  \, x^m/m! \, y^n
\qquad\text{where}\qquad
W_{m,n} = \sum_{k = 0}^m \sum_{\ell = 0}^n \binom{m}{k} \, U_{k,\ell} \, V_{n-k,n-\ell}.
\]
Consider~$U(x,y) \eqdef B(x,y) \, y$ and~$V(x,y) \eqdef e^x \, C(y)$, we obtain
\begin{align*}
B(x,y) \, y \, e^x \, C(y) & = \sum_{m \ge 0, n \ge 1}  \left( \sum_{k = 0}^m \sum_{\ell = 1}^n \binom{m}{k} \, B_{k,\ell-1} \, C_{n-\ell} \right) \, x^m/m! \, y^n \\
& = \sum_{m \ge 0, n \ge 1} B_{m,n} \, x^m/m! \, y^n \\
& = B(x,y) - e^x
\end{align*}
from which we derive that
\[
B(x,y) = \frac{e^x}{1-e^x \, y \, C(y)}.
\qedhere
\]
\end{proof}

\begin{proposition}
\label{prop:brooms3}
For any~$m \in \N$, we have
\[
y \, B_m(y) \, C(y) = \sum_{k = 0}^m (-1)^{m-k} \binom{m}{k} \, B_k(y).
\]
where~$\displaystyle C(y) \eqdef \sum_{n \ge 0} C_n \, y^n = \frac{1-\sqrt{1-4y}}{2y}$.
\end{proposition}

\begin{proof}
The same argument as in the proof of \cref{prop:brooms1} gives the functional equation
\[
B_m = 1 + y \, C \, \sum_{k = 0}^m \binom{m}{k} \, B_k.
\]
As the inverse of the binomial matrix~$\big[\binom{m}{k}\big]_{m,k}$ is the signed binomial matrix~$\big[(-1)^{m-k}\binom{m}{k}\big]_{m,k}$, we obtain that
\[
y \, B_m \, C = \sum_{k = 0}^m (-1)^{m-k} \binom{m}{k} \,(B_k - 1) = \sum_{k = 0}^m (-1)^{m-k} \binom{m}{k} \, B_k.
\qedhere
\]
\end{proof}

\begin{example}
For~$m = 2$, we have
\(
B_2 = 1 + y \, C \, (B_0 + 2  \, B_1 + B_2) = 1 + y \, C( C + 2 \, (C - 1) / y + B_2)
\)
from which we derive that
\(
B_2 \, (1 - y \, C) = 1 + y \, C^2 + 2 \, C \, (C - 1) = 2 \, C^2 - C. 
\)
Finally, we observe that
\(
C^2 (1+y \, C) \, ( 1 - y \, C) = C^2 \, (1 - y^2 \, C^2) = C^2 - y^2 \, C^4 = C^2 - (C - 1)^2 = 2 \, C^2 - C
\)
We conclude that~$B_2 = C^3 (1+y \, C)$.
\end{example}

%sage: n = 2 
%....: for m in range(6): 
%....:     print(m, len(digraph_ornamentation_lattice(DiGraph([list(range(n+m)), [(i,n) for i in range(n)] + [(n+j,n+j+Integer(1)) for j in range(m)]])))) 
%....:                                                                                                                                                                                                     
%0 4
%1 13
%2 42
%3 138
%4 462
%5 1573
%A070031
%Expansion of (1+x*C)*C^3, where C = (1-sqrt(1-4*x))/(2*x) is g.f. for Catalan numbers, A000108.

%sage: n = 3 
%....: for m in range(5): 
%....:     print(m, len(digraph_ornamentation_lattice(DiGraph([list(range(n+m)), [(i,n) for i in range(n)] + [(n+j,n+j+Integer(1)) for j in range(m)]])))) 
%....:                                                                                                                                                                                                     
%0 8
%1 35
%2 134
%3 492
%4 1782

%sage: n = 4 
%....: for m in range(4): 
%....:     print(m, len(digraph_ornamentation_lattice(DiGraph([list(range(n+m)), [(i,n) for i in range(n)] + [(n+j,n+j+Integer(1)) for j in range(m)]])))) 
%....:                                                                                                                                                                                                     
%0 16
%1 97
%2 450
%3 1878

%sage: def B(n,m): 
%....:     if n == 0: return 1 
%....:     if m == 1: return catalan_number(n+1) 
%....:     return add(binomial(m,l) * add(B(k-1,l)*catalan_number(n-k) for k in range(1,n+1)) for l in range(m+1)) 
%....:                                                                                                                                                                                                       
%sage: for n in range(7): 
%....:     print([B(n,m) for m in range(1,7)]) 
%....:                                                                                                                                                                                                       
%[1, 1, 1, 1, 1, 1]
%[2, 4, 8, 16, 32, 64] --> 2^n
%[5, 13, 35, 97, 275, 793] --> 2^n + 3^n
%[14, 42, 134, 450, 1574, 5682] --> not in OEIS
%[42, 138, 492, 1878, 7572, 31878]
%[132, 462, 1782, 7458, 33342, 157122]
%[429, 1573, 6435, 28873, 139659, 717673]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Intreeval hypergraphic lattices}
\label{sec:intreevalHypergraphicPosets}

In this section, we characterize the subhypergraphs~$\II$ of the path interval~$\PP(T)$ of a directed tree~$T$ whose acyclic sourcing poset~$\ASour(\II)$ is a lattice.
We actually consider increasing trees as it simplifies the definitions of the conditions and does not loose generality up to relabeling.
\vincent{This section needs illustrations...}

\begin{definition}
An \defn{intreeval hypergraph} of an increasing tree~$T$ is a subhypergraph of~$\PP(T)$.
\end{definition}

\begin{definition}
\label{def:pathIntersectionClose}
We say that an intreeval hypergraph~$\II$ of an increasing tree~$T$ is \defn{path intersection closed} if for all~$I,J\in \II$ with~$|I\cap J|> 1$ such that $\min(I) < \min(I\cap J)$ and  $\max J < \max (I\cap J)$, there exists an~$K \in \II$ such that $\min(K) \in J \cap [\min(I\cap J)]$ and $\max K \in I \ssm [\max(I\cap J)-1]$.
\end{definition}

\begin{definition}
\label{def:pathStarSparse}
Let~$\II$ be an intreeval hypergraph of an increasing tree~$T$.
Consider~$u,v \in T$ such that there is a directed path from~$u$ to~$v$, and let~$u_1, \dots, u_k$ (resp.~$v_1, \dots, v_\ell$) denote the incoming (resp.~outgoing) neighbors of~$u$ (resp.~$v$) in~$T$.
We denote by~$X(T,u,v,\II)$ the graph on~$u_1, \dots, u_k, v_1, \dots, v_\ell$ with an edge joining~$u_i$ and~$v_j$ if and only if there is~$I \in \II$ containing both~$u_i$ and~$v_j$.
We say that~$\II$ is \defn{path star sparse} if~$X(T,u,v,\II)$ is acyclic for all~$u,v$ connected by a directed path.
\end{definition}

The goal of this section is to show the following characterization.
It will be a consequence of \cref{lem:pathIntersectionClosed,lem:pathStarSparse,prop:sufficientConditions}.

\begin{theorem}
\label{thm:intreevalLattices}
Let~$\II$ be an intreeval hypergraph of an increasing tree~$T$.
The acyclic sourcing poset~$\ASour(\II)$ is a lattice if and only if $\II$ is path intersection closed (\cref{def:pathIntersectionClose}) and path star sparse (\cref{def:pathStarSparse}).
\end{theorem}

\begin{remark}
When $T$ is a line, 
\begin{itemize}
\item the path intersection closed condition boils down to being closed under intersection (including singletons by default),
\item the path star sparse condition is empty,
\item the characterization of \cref{thm:intreevalLattices} was proved in~\cite[Thm.~A]{BergeronPilaud}.
\end{itemize}
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Necessary condition}

We first prove that the two conditions of \cref{thm:intreevalLattices} are necessary.

\begin{lemma}
\label{lem:pathIntersectionClosed}
If~$\ASour(\II)$ is a lattice, then $\II$ is path intersection closed.
\end{lemma}

\begin{proof}
The proof follows exactly the same lines as that of~\cite[Prop.~4.6]{BergeronPilaud}.
Assume by means of contradiction that there are~$I,J\in \II$ with~$|I\cap J|> 1$ such that $\min(I) < \min(I\cap J)$ and  $\max J < \max (I\cap J)$, and there is there no~$K \in \II$ such that $\min(K) \in J \cap [\min(I\cap J)]$ and $\max K \in I \ssm [\max(I\cap J)]$.

Let~$b$ (resp.~$c$) be the bottom (resp.~top) endpoint of~$I \cap J$, and~$a$ (resp.~$d$) be its neighbor in~$I \ssm J$ (resp.~$J \ssm I$).
Let~$Y$ be a word formed by~$(I \cup J) \ssm \{a,b,c,d\}$ in any order, and~$X$ be a word formed by~$V \ssm (I \cup J)$ in any order.
Consider the permutations
\[
\pi_A \eqdef XbacdY
\quad
\pi_B \eqdef XacdbY
\quad
\pi_C \eqdef XdbacY
\quad
\pi_D \eqdef XcdbaY
\quad
\pi_E \eqdef XadcbY
\quad
\pi_F \eqdef XadbcY
\]
and let~$S_A \eqdef \asour{\pi_A}, \dots, S_F \eqdef \asour{\pi_F}$ denote the corresponding acyclic sourcings of~$T$ (where~${\pi \mapsto \aorn{\pi}}$ is the composition of $\pi \mapsto \areori{\pi}$ and $R \mapsto \asour{\pi}$).

We claim that~$S_E = S_F$.
Indeed, if~$K \in \II$ is such that~$S_E(K) \ne S_F(K)$, then~$K \supseteq \{b,c\}$ but~$K \cap (X \cup \{a,d\}) = \varnothing$.
This would implies that~$\min(K) \in [b] \cap J$ while $\max(K) \in I \ssm [c-1]$, contradicting our assumption on~$I$ and~$J$.

Observe now that
\[
\pi_A < \pi_C
\qquad
\pi_A < \pi_D
\qquad
\pi_B < \pi_D
\qquad
\pi_B < \pi_E
\qquad
\pi_F < \pi_C
\]
in weak order (note that~$\pi_B \not< \pi_C$ though).
As~$\pi \mapsto \aorn{\pi}$ is order-preserving and~$S_E = S_F$, we conclude that
\[
S_A < S_C
\qquad
S_A < S_D
\qquad
S_B < S_E = S_F < S_C
\qquad
S_B < S_D.
\]

If~$\ASour(\II)$ were a lattice, we therefore must have an acyclic sourcing~$S_G$ of~$\II$ such that
\[
S_A < S_G
\qquad
S_B < S_D
\qquad
S_G < S_C
\qquad
S_G < S_D.
\]
Since~$S_G$ is acyclic and~$\pi \mapsto \asour{\pi}$ is surjective, there is a permutation~$\pi_G$ such that~$S_G = \asour{\pi}$.
Let
\[
g \eqdef \pi(\min\set{i \in [n]}{\pi_G(i) \in I \cup J}).
\]
If~$g \in I \cap [b-1]$, then~$S_G(I) = g < b = S_A(I)$, contradicting that~$S_A < S_G$.
If~$g \in J \cap [c-1]$, then~$S_G(J) = g < c = S_B(J)$, contradicting that~$S_B < S_G$.
If~$g \in J \ssm [c]$, then~$S_G(J) = g > c = S_D(J)$, contradicting that~$S_G < S_D$.
If~$g \in I \ssm [b]$, then~$S_G(I) = g > b = S_C(I)$, contradicting that~$S_G < S_C$.
As these four cases are all excluded, we reached a contradiction.
\end{proof}

\begin{lemma}
\label{lem:pathStarSparse}
If~$\ASour(\II)$ is a lattice, then $\II$ is path star sparse.
\end{lemma}

\begin{proof}
Assume by means of contradiction that there are~$u,v \in V$ connected by a directed path such that~$X(T,u,v,\II)$ contains a cycle~$u_1, v_1, u_2, v_2, \dots, u_p, v_p$, where~$p \ge 2$ (the indices are understood modulo~$p$).
Without loss of generality, we can assume that this cycle is induced.
Note that~$u_i < v_j$ for all~$i,j \in [p]$ since we consider increasing trees, and that there is no~$I \in \II$ containing either two distinct~$u_i$'s or two distinct~$v_j$'s since they are incomparable in~$T$.

Let~$W$ be a word formed by the other vertices~$V \ssm \{u_0, v_0, \dots, u_p, v_p\}$ in any order.
For~$i \in [p]$, define the permutations
\[
\sigma^i \eqdef u_i v_i u_{i+1} v_{i+1} \dots u_{i+p-1} v_{i+p-1} W
\qquad\text{and}\qquad
\tau^i \eqdef v_i u_{i+1} v_{i+1} \dots u_{i+p-1} v_{i+p-1} u_i W
\]
and the acyclic sourcings~$S^i \eqdef \asour{\sigma^i}$ and~$T^i \eqdef \asour{\tau^i}$ of~$\II$.

Let~$S$ denote the sourcing on~$\II$ defined by
\[
S(I) = 
\begin{cases}
	u_i & \text{if~$u_i \in I$ and~$v_{i-1} \notin I$} \\
	v_i & \text{if~$v_i \in I$ and~$u_{i-1} \notin I$} \\
	w & \text{in all other cases, where~$w$ is the first letter of~$W$ that appear in~$I$}.
\end{cases}
\]
Note that~$S$ is cyclic since it contains the cycle~$u_1, v_1, u_2, v_2, \dots, u_p, v_p$ that we started from.
Observe also that for any~$i \in [p]$ and any~$I \in \II$,
\begin{itemize}
\item $S^i(I) = S(I)$ except if~$\{u_i, v_{i-1}\} \subseteq I$ in which case we have~$S^i(I) = u_i < v_{i-1} = S(I)$,
\item $T^i(I) = S(I)$ except if~$\{u_i, v_i\} \subseteq I$ in which case we have~$T^i(I) = v_i < u_i = S(I)$.
\end{itemize}
In particular, we obtain that~$S^i < S < T^i$ for all~$i \in [p]$.

If~$\ASour(\II)$ were a lattice, we therefore must have an acyclic sourcing~$T$ of~$\II$ such that~$S^i \le T \le T^i$ for all~$i \in [p]$.
For any~$I \in \II$, there is~$i \in [p]$ such that~$u_i \notin I$.
For this~$i$, we have~$S(I) = S^i(I) \le T(I) \le T^i(I) = S(I)$, hence~$S(I) = T(I)$.
We conclude that~$S = T$ contradicting the acyclicity of~$T$.
\end{proof}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Path star sparse implies no long cycles}

In this section, we observe the following important property of the path star sparse intreeval hypergraphs.

\begin{proposition}
\label{prop:pathStarSparse}
Let~$\II$ be a path star sparse intreeval hypergraph of an increasing tree~$T$.
Then any minimal cycles in any sourcing of~$S$ has length~$2$.
\end{proposition}

\begin{proof}
Assume by means of contradiction that there is a sourcing~$S$ of~$\II$ with a minimal cycle~$I_1, \dots, I_p$ where~$p \ge 3$ (the indices are understood modulo~$p$), and let~$w_i \eqdef S(I_i)$ for all~$i \in [p]$.
In other words, we have
\begin{enumerate}[(a)]
\item $w_i \in I_{i+1} \ssm \{w_{i+1}\}$ for all~$i \in [p]$ (because~$I_1, \dots, I_p$ form a cycle in~$S$), and
\item $w_i \in I_j \iff j \in \{i,i+1\}$ for all~$i,j \in [p]$ (because this cycle is minimal).
\end{enumerate}
Moreover, we can assume that there is no sourcing~$S' < S$ with a a minimal cycle of length at least~$3$.
We also denote by~$w'_i$ the first vertex along the path joining~$w_i$ to~$w_{i+1}$ in~$T$.

As~$I_{i+2} \cup I_{i+3} \cup \dots \cup I_{i-2} \cup I_{i-1}$ is connected by~(a) and contains both~$w_{i-1}$ and~$w_{i+1}$ but not~$w_i$ by~(b), the (not necessarily directed) path joining~$w_{i-1}$ to~$w_{i+1}$ in~$T$ cannot contain~$w_i$.
Hence, the paths from~$w_i$ to~$w_{i-1}$ and to~$w_{i+1}$ respectively share their first vertex, which we denote by~$w'_i$.
Since~$w_i$ and~$w_{i+1}$ both belong to the path~$I_{i+1}$, they are connected by a directed path in~$T$.
We thus obtain that the vertices~$w_1, \dots, w_p$ form an alternating cycle in~$\tc(T)$, and thus that~$p = 2q$.
By symmetry, assume that~$w_i$ has two incoming (resp.~outgoing) arrows in this cycle if~$i$ is even (resp.~odd).

Let~$j \in [q]$.
If~$w'_{2j}$ is not in~$I_{2j+2}$, we can consider the sourcing~$S'$ of~$\II$ defined by~$S'(I_{2j}) = w'_{2j}$ and~$S'(I) = S(I)$ for all~$I \in \II$.
We have~$S' < S$ by definition, and~$I_1, \dots, I_p$ still form a minimal cycle in~$S'$, contradicting the minimality of~$S$.
We conclude that~$w'_{2j}$ belongs to~$I_{2j+2}$, hence to the path from~$w_{2j+1}$ to~$w_{2j+2}$.
This implies in particular that~$w'_{2j} \le w'_{2j+2}$.
We thus obtain that~$w'_2 \le w'_4 \le \dots \le w'_{2q} \le w'_2$, and thus that they all coincide.
We denote this vertex by~$v$.

We obtained that~$I \eqdef \bigcap_{i \in [q]} I_i$ is a non-empty (as it contains~$v$) directed path (as intersection of directed paths in a tree~$T$).
Its final vertex is~$v$ and we denote its initial vertex by~$u$.
For~$j \in [q]$, we denote by~$u_j$ the neighbor of~$u$ in the path from~$w_{2j-1}$ to~$u$, and we denote by~$v_j \eqdef w_{2j}$ which is a neighbor of~$v$.
We obtained that~$u_j \in I_{2j-1} \cap I_{2j}$ while~$v_j \in I_{2j} \cap I_{2j+1}$, hence that~$u_1, v_1, \dots, u_p, v_p$ form a cycle in~$X(T, u, v, \II)$, showing that~$T$ is not path star sparse.
\end{proof}

\begin{remark}
\cref{prop:pathStarSparse} fails if the intreeval hypergraph~$\II$ is not path star sparse.
\vincent{todo}
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section*{Acknowledgments}

This work was initiated at the Banff workshop ``Lattice Theory'' in January 2025.
We are grateful to the organizers (Emily Barnard, Cesar Ceballos, Colin Defant, Osamu Iyama, and Nathan Williams) and to all participants for the friendly and inspiring atmosphere.
We particularly thank Eleni Tzanaki for several conversations on related topics on hypergraphical polytopes.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\bibliographystyle{alpha}
\bibliography{intreevalLattices}
\label{sec:biblio}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}
